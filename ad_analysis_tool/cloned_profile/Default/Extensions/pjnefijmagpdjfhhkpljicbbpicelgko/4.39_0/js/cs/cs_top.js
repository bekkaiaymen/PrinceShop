(function(){"use strict";const W=["classroom.google.com","outlook.live.com","docs.google.com","meet.google.com","translate.google.com","discord.com","www.messenger.com","www.linkedin.com","quizlet.com","www.teamwork.com","www.instagram.com","www.carousell.com.hk","outlook.office.com","outlook.office365.com","web.whatsapp.com","dictanote.co","localhost:8000","mail.yahoo.com","www.bing.com","www.twitch.tv","www.youtube.com","www.facebook.com","www.twitter.com","x.com","www.reddit.com","www.pinterest.com","www.google.com","www.google.ad","www.google.ae","www.google.com.af","www.google.com.ag","www.google.com.ai","www.google.al","www.google.am","www.google.co.ao","www.google.com.ar","www.google.as","www.google.at","www.google.com.au","www.google.az","www.google.ba","www.google.com.bd","www.google.be","www.google.bf","www.google.bg","www.google.com.bh","www.google.bi","www.google.bj","www.google.com.bn","www.google.com.bo","www.google.com.br","www.google.bs","www.google.bt","www.google.co.bw","www.google.by","www.google.com.bz","www.google.ca","www.google.cd","www.google.cf","www.google.cg","www.google.ch","www.google.ci","www.google.co.ck","www.google.cl","www.google.cm","www.google.cn","www.google.com.co","www.google.co.cr","www.google.com.cu","www.google.cv","www.google.com.cy","www.google.cz","www.google.de","www.google.dj","www.google.dk","www.google.dm","www.google.com.do","www.google.dz","www.google.com.ec","www.google.ee","www.google.com.eg","www.google.es","www.google.com.et","www.google.fi","www.google.com.fj","www.google.fm","www.google.fr","www.google.ga","www.google.ge","www.google.gg","www.google.com.gh","www.google.com.gi","www.google.gl","www.google.gm","www.google.gr","www.google.com.gt","www.google.gy","www.google.com.hk","www.google.hn","www.google.hr","www.google.ht","www.google.hu","www.google.co.id","www.google.ie","www.google.co.il","www.google.im","www.google.co.in","www.google.iq","www.google.is","www.google.it","www.google.je","www.google.com.jm","www.google.jo","www.google.co.jp","www.google.co.ke","www.google.com.kh","www.google.ki","www.google.kg","www.google.co.kr","www.google.com.kw","www.google.kz","www.google.la","www.google.com.lb","www.google.li","www.google.lk","www.google.co.ls","www.google.lt","www.google.lu","www.google.lv","www.google.com.ly","www.google.co.ma","www.google.md","www.google.me","www.google.mg","www.google.mk","www.google.ml","www.google.com.mm","www.google.mn","www.google.ms","www.google.com.mt","www.google.mu","www.google.mv","www.google.mw","www.google.com.mx","www.google.com.my","www.google.co.mz","www.google.com.na","www.google.com.ng","www.google.com.ni","www.google.ne","www.google.nl","www.google.no","www.google.com.np","www.google.nr","www.google.nu","www.google.co.nz","www.google.com.om","www.google.com.pa","www.google.com.pe","www.google.com.pg","www.google.com.ph","www.google.com.pk","www.google.pl","www.google.pn","www.google.com.pr","www.google.ps","www.google.pt","www.google.com.py","www.google.com.qa","www.google.ro","www.google.ru","www.google.rw","www.google.com.sa","www.google.com.sb","www.google.sc","www.google.se","www.google.com.sg","www.google.sh","www.google.si","www.google.sk","www.google.com.sl","www.google.sn","www.google.so","www.google.sm","www.google.sr","www.google.st","www.google.com.sv","www.google.td","www.google.tg","www.google.co.th","www.google.com.tj","www.google.tl","www.google.tm","www.google.tn","www.google.to","www.google.com.tr","www.google.tt","www.google.com.tw","www.google.co.tz","www.google.com.ua","www.google.co.ug","www.google.co.uk","www.google.com.uy","www.google.co.uz","www.google.com.vc","www.google.co.ve","www.google.vg","www.google.co.vi","www.google.com.vn","www.google.vu","www.google.ws","www.google.rs","www.google.co.za","www.google.co.zm","www.google.co.zw","www.google.cat","chat.openai.com","chatgpt.com","teams.microsoft.com","classx.org","gemini.google.com","www.overleaf.com","www.notion.so","www.remnote.com","chat.mistral.ai","copilot.microsoft.com","www.perplexity.ai","huggingface.co","character.ai","grok.com","aistudio.google.com","chat.deepseek.com","www.meta.ai","chat.qwenlm.ai","app.gradally.com","www.duolingo.com","github.com","flowgpt.com"],$=[".instructure.com","canvas."];function P(e){return W.indexOf(e)!==-1||$.some(o=>e.includes(o))}const Z=[".zendesk.com",".force.com",".salesforce.com",".salesforce-sites.com",".hubspot.com","app.jasper.ai",".athenahealth.com",".atlassian.net",".simplepractice.com",".slack.com",".webpt.com",".clickup.com",".therapynotes.com",".clinicient.com",".qualtrics.com",".freshdesk.com",".sharepoint.com",".service-now.com",".site.com",".freshchat.com",".logisticsbackoffice.com",".kipuworks.com",".ecwcloud.com",".followupboss.com",".pipedrive.com",".intercom.com","doctornow.io",".moderationinterface.com",".versncr.com",".kareo.com",".growtherapy.com",".drchrono.com",".gohighlevel.com",".redtailtechnology.com",".heimlich.com","otranscribe.com",".gold-chat.net","app.asana.com",".practicefusion.com",".intuit.com",".intellect.com","dynamics.microsoft.com",".oracle.com",".sap.com",".sugarcrm.com",".freshworks.com",".insightly.com",".bitrix24.com",".creatio.com",".netsuite.com",".odoo.com",".vtiger.com",".teledentix.com",".mouthwatch.com",".dentulu.com",".denteractive.com",".toothpic.com",".virtualdentalcare.com",".smilevirtual.com",".aligntech.com",".candidco.com",".ortholive.com","theranest.com",".valant.io",".therapyappointment.com","luminello.com","counsol.com",".myclientsplus.com",".eclinicalworks.com",".advancedmd.com",".cerner.com",".meditech.com",".epic.com",".nextgen.com",".chargebee.com",".zoominfo.com",".shopify.com",".wordpress.com",".wordpress.org",".zoho.com",".apptivo.com",".act.com",".salesmate.io",".nimble.com",".close.com",".copper.com",".keap.com",".agilecrm.com","capsulecrm.com",".lessannoyingcrm.com",".pipelinecrm.com",".nutshell.com","salesflare.com","highrisehq.com",".pipelinercrm.com",".wrike.com",".smartsheet.com",".monday.com",".redbooth.com",".basecamp.com",".teamwork.com",".podio.com",".backlog.com",".proofhub.com",".livechat.com",".helpscout.net",".tidio.com",".crisp.chat",".olark.com",".kayako.com",".liveagent.com",".userlike.com",".happyfox.com",".freshcaller.com",".proton.me",".fastmail.com",".hiverhq.com",".spikenow.com",".superhuman.com",".missiveapp.com",".frontapp.com",".hey.com",".zimbra.com",".peopleperhour.com",".truelancer.com",".freelancer.com",".upwork.com",".guru.com",".fiverr.com",".upwork.com",".toptal.com",".weworkremotely.com",".codeable.io",".cloudpeeps.com",".gocatalant.com",".lever.co",".indeed.com",".outreach.io",".greenhouse.io",".loom.com",".miro.com",".coda.io",".asktetra.com",".otter.ai"],J=["pi.ai"],Q=["www.dating.com","textspins.com","limpado.com","www.evernote.com","mail.google.com","mail.zoho.com","pjnefijmagpdjfhhkpljicbbpicelgko","kcflpifkhnpaikpneeilcaoimgdodikg","claude.ai"];function m(...e){localStorage.viDebug==="true"&&console.log("[VI][T]",...e)}function u(e,o){m("VI [MP]",e,o),chrome.runtime.sendMessage({message_id:"mp_track",category:e,info:o})}function X(e){const o=(window.location.href||"").slice(0,60);let n="";e.stack&&(n+=e.stack.substring(0,300).split(`
`).join("")),u("JSError-CST",{action:e.toString(),label:n,url:o})}function N(e){u("V Page View",{host:window.location.hostname,href:window.location.href,status:e})}function ee(){return document.contentType?document.contentType.startsWith("application/xml")||document.contentType.startsWith("text/xml")||document.contentType.startsWith("application/xhtml+xml"):!1}function z(e,o){for(let n=0;n<o.length;n+=1)o[n]===e&&o.splice(n,1)}async function oe(e){const{checked:o}=e.querySelector("#voicein_db"),n=e.querySelector("#voicein_spacebox_container"),t=await chrome.storage.local.get({spacebox_domains:[]}),i=window.location.host,a=t.spacebox_domains;o?(a.indexOf(i)===-1&&(a.push(i),u("DictationBox",{domain:i})),n.style.display="block"):(z(i,a),n.style.display="none");const c={spacebox_domains:a};chrome.storage.local.set(c)}async function ne(e){const{checked:o}=e.querySelector("#voicein_pm"),n=await chrome.storage.local.get({no_advancedmode_domains:[]}),t=window.location.host,i=n.no_advancedmode_domains;o?(z(t,i),u("NoAdvancedMode",{domain:t,advancedMode:!0})):i.indexOf(t)===-1&&(i.push(t),u("NoAdvancedMode",{domain:t,advancedMode:!1}));const a={no_advancedmode_domains:i};chrome.storage.local.set(a);const c=e.querySelector("#voicein_pm_status");c.style.display="block",c.innerHTML="Refresh the page to apply changes."}function E(){let e=[];return navigator.userAgent.indexOf("Edg")>-1?e=[...H,...te]:e=[...H,...ie],e.sort((o,n)=>o[1].localeCompare(n[1])),e}const H=[["af-ZA","Afrikaans (South Africa)","Afrikaans"],["sq-AL","Albanian (Albania)","Albanian"],["am-ET","Amharic (Ethiopia)","Amharic"],["ar-DZ","Arabic (Algeria)","Arabic (AL)"],["ar-BH","Arabic (Bahrain)","Arabic (BH)"],["ar-EG","Arabic (Egypt)","Arabic (EG)"],["ar-IQ","Arabic (Iraq)","Arabic (IQ)"],["ar-IL","Arabic (Israel)","Arabic (IL)"],["ar-JO","Arabic (Jordan)","Arabic (JO)"],["ar-KW","Arabic (Kuwait)","Arabic (KW)"],["ar-LB","Arabic (Lebanon)","Arabic (LB)"],["ar-MA","Arabic (Morocco)","Arabic (MO)"],["ar-OM","Arabic (Oman)","Arabic (OM)"],["ar-QA","Arabic (Qatar)","Arabic (QA)"],["ar-SA","Arabic (Saudi Arabia)","Arabic (SA)"],["ar-PS","Arabic (Palestine)","Arabic (Pa)"],["ar-TN","Arabic (Tunisia)","Arabic (TN)"],["ar-AE","Arabic (UAE)","Arabic (UA)"],["ar-YE","Arabic (Yemen)","Arabic (YE)"],["hy-AM","Armenian (Armenia)","Armenian"],["az-AZ","Azerbaijani (Azerbaijan)","Azerbaijani"],["eu-ES","Basque (Spain)","Basque"],["bn-IN","Bengali (India)","Bengali (IN)"],["bs-BA","Bosnian (Bosnia and Herzegovina)","Bosnian"],["bg-BG","Bulgarian (Bulgaria)","Bulgarian"],["my-MM","Burmese (Myanmar)","Burmese"],["ca-ES","Catalan (Spain)","Catalan"],["hr-HR","Croatian (Croatia)","Croatian"],["cs-CZ","Czech (Czech Republic)","Czech"],["da-DK","Danish (Denmark)","Danish"],["nl-BE","Dutch (Belgium)","Dutch (BE)"],["nl-NL","Dutch (Netherlands)","Dutch (NL)"],["en-AU","English (Australia)","English (AU)"],["en-CA","English (Canada)","English (CA)"],["en-GH","English (Ghana)","English (GH)"],["en-HK","English (Hong Kong)","English (HK)"],["en-IN","English (India)","English (IN)"],["en-IE","English (Ireland)","English (IE)"],["en-KE","English (Kenya)","English (KE)"],["en-NZ","English (New Zealand)","English (NZ)"],["en-NG","English (Nigeria)","English (NG)"],["en-PH","English (Philippines)","English (PH)"],["en-SG","English (Singapore)","English (SG)"],["en-ZA","English (South Africa)","English (SA)"],["en-TZ","English (Tanzania)","English (TZ)"],["en-GB","English (United Kingdom)","English (UK)"],["en-US","English (United States)","English (US)"],["et-EE","Estonian (Estonia)","Estonian"],["fil-PH","Filipino (Philippines)","Filipino"],["fi-FI","Finnish (Finland)","Finnish"],["fr-BE","French (Belgium)","French (BE)"],["fr-CA","French (Canada)","French (CA)"],["fr-FR","French (France)","French (FR)"],["fr-CH","French (Switzerland)","French (CH)"],["gl-ES","Galician (Spain)","Galician"],["ka-GE","Georgian (Georgia)","Georgian"],["de-AT","German (Austria)","German (AT)"],["de-DE","German (Germany)","German"],["de-CH","German (Switzerland)","German (CH)"],["el-GR","Greek (Greece)","Greek"],["gu-IN","Gujarati (India)","Gujarati"],["hi-IN","Hindi (India)","Hindi"],["hu-HU","Hungarian (Hungary)","Hungarian"],["is-IS","Icelandic (Iceland)","Icelandic"],["id-ID","Indonesian (Indonesia)","Indonesian"],["it-IT","Italian (Italy)","Italian"],["it-CH","Italian (Switzerland)","Italian (CH)"],["ja-JP","Japanese (Japan)","Japanese"],["jv-ID","Javanese (Indonesia)","Javanese"],["kn-IN","Kannada (India)","Kannada"],["km-KH","Khmer (Cambodia)","Khmer"],["ko-KR","Korean (South Korea)","Korean"],["lo-LA","Lao (Laos)","Lao"],["lv-LV","Latvian (Latvia)","Latvian"],["lt-LT","Lithuanian (Lithuania)","Lithuanian"],["mk-MK","Macedonian (North Macedonia)","Macedonian"],["ms-MY","Malay (Malaysia)","Malay"],["ml-IN","Malayalam (India)","Malayalam (IN)"],["mr-IN","Marathi (India)","Marathi"],["mn-MN","Mongolian (Mongolia)","Mongolian"],["ne-NP","Nepali (Nepal)","Nepali"],["fa-IR","Persian (Iran)","Persian"],["pl-PL","Polish (Poland)","Polish"],["pt-BR","Portuguese (Brazil)","Port. (BR)"],["pt-PT","Portuguese (Portugal)","Portuguese"],["ro-RO","Romanian (Romania)","Romanian"],["ru-RU","Russian (Russia)","Russian"],["sr-RS","Serbian (Serbia)","Serbian"],["si-LK","Sinhala (Sri Lanka)","Sinhala"],["sk-SK","Slovak (Slovakia)","Slovak"],["sl-SI","Slovenian (Slovenia)","Slovenian"],["es-AR","Spanish (Argentina)","Spanish (AR)"],["es-BO","Spanish (Bolivia)","Spanish (BO)"],["es-CL","Spanish (Chile)","Spanish (CL)"],["es-CO","Spanish (Colombia)","Spanish (CO)"],["es-CR","Spanish (Costa Rica)","Spanish (CR)"],["es-DO","Spanish (Dominican Republic)","Spanish (DR)"],["es-EC","Spanish (Ecuador)","Spanish (EC)"],["es-SV","Spanish (El Salvador)","Spanish (SV)"],["es-GT","Spanish (Guatemala)","Spanish (GT)"],["es-HN","Spanish (Honduras)","Spanish (HO)"],["es-MX","Spanish (Mexico)","Spanish (MX)"],["es-NI","Spanish (Nicaragua)","Spanish (NI)"],["es-PA","Spanish (Panama)","Spanish (PA)"],["es-PY","Spanish (Paraguay)","Spanish (PY)"],["es-PE","Spanish (Peru)","Spanish (PE)"],["es-PR","Spanish (Puerto Rico)","Spanish (PR)"],["es-ES","Spanish (Spain)","Spanish"],["es-US","Spanish (United States)","Spanish (US)"],["es-UY","Spanish (Uruguay)","Spanish (UY)"],["es-VE","Spanish (Venezuela)","Spanish (VE)"],["sw-KE","Swahili (Kenya)","Swahili (KE)"],["sw-TZ","Swahili (Tanzania)","Swahili (TZ)"],["sv-SE","Swedish (Sweden)","Swedish"],["ta-IN","Tamil (India)","Tamil"],["te-IN","Telugu (India)","Telugu"],["th-TH","Thai (Thailand)","Thai"],["tr-TR","Turkish (Turkey)","Turkish"],["uk-UA","Ukrainian (Ukraine)","Ukrainian"],["uz-UZ","Uzbek (Uzbekistan)","Uzbek"],["vi-VN","Vietnamese (Vietnam)","Vietnamese"],["zu-ZA","Zulu (South Africa)","Zulu"]],ie=[["bn-BD","Bengali (Bangladesh)","Bengali (BD)"],["yue-Hant-HK","Cantonese (Hong Kong)","Cantonese (HK)"],["en-PK","English (Pakistan)","English (PK)"],["iw-IL","Hebrew (Israel)","Hebrew (IL)"],["cmn-Hans-CN","Mandarin (China)","Mandarin (CN)"],["cmn-Hant-TW","Mandarin (Taiwan)","Mandarin (TW)"],["no-NO","Norwegian Bokm√•l (Norway)","Norwegian (NO)"],["pa-Guru-IN","Punjabi (Gurmukhi India)","Punjabi (IN)"],["su-ID","Sundanese (Indonesia)","Sundanese (ID)"],["ta-MY","Tamil (Malaysia)","Tamil (MY)"],["ta-SG","Tamil (Singapore)","Tamil (SG)"],["ta-LK","Tamil (Sri Lanka)","Tamil (LK)"],["ur-IN","Urdu (India)","Urdu (IN)"],["ur-PK","Urdu (Pakistan)","Urdu (PK)"]],te=[["ar-LY","Arabic (Libya)","Arabic (LY)"],["ar-SY","Arabic (Syria)","Arabic (SY)"],["zh-HK","Chinese (Cantonese, Traditional)","Cantonese (HK)"],["zh-CN","Chinese (Mandarin, Simplified)","Mandarin (CN)"],["zh-TW","Chinese (Taiwanese Mandarin)","Mandarin (TW)"],["he-IL","Hebrew (Israel)","Hebrew (IL)"],["ga-IE","Irish (Ireland)","Irish (IE)"],["kk-KZ","Kazakh (Kazakhstan)","Kazakh (KZ)"],["mt-MT","Maltese (Malta)","Maltese (MT)"],["nb-NO","Norwegian (Bokm√•l, Norway)","Norwegian (NO)"],["ps-AF","Pashto (Afghanistan)","Pashto (AF)"],["so-SO","Somali (Somalia)","Somali (SO)"],["es-CU","Spanish (Cuba)","Spanish (CU)"],["es-GQ","Spanish (Equatorial Guinea)","Spanish (GQ)"],["cy-GB","Welsh (United Kingdom)","Welsh (GB)"]];function ae(e){const o=e.querySelector("#fab-grabber-col"),n=e.querySelector("#voicein_popup_container");let t=0,i=0,a=!1;function c(l){let s=t+(l-i);return s<40&&(s=40),s>window.innerHeight-100&&(s=window.innerHeight-100),s}if(o.addEventListener("mousedown",l=>{l.preventDefault(),a=!0,t=e.querySelector("#voicein_settings").getBoundingClientRect().y,i=l.clientY}),window.addEventListener("mouseup",l=>{if(a){const{clientY:s}=l,d=c(s);localStorage.VoiceInTopY=d,a=!1}}),window.addEventListener("mousemove",l=>{if(!a)return;l.preventDefault();const{clientY:s}=l,d=c(s);n.style.top=`${d}px`}),localStorage.VoiceInTopY){let l=parseInt(localStorage.VoiceInTopY,10);Number.isNaN(l)||(l<40&&(l=40),l>window.innerHeight-100&&(l=window.innerHeight-100),n.style.top=`${l}px`)}}function ce(){const e=document.createElement("div");return e.setAttribute("id","voicein-notification"),e.style.display="none",document.documentElement.appendChild(e),e}function le(e){return e==="warning"?`<svg title="warning icon" width="1em" height="1em" style="fill: #333" aria-hidden="true" version="1.2" baseProfile="tiny" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
<path d="M12 5.511c.561 0 1.119.354 1.544 1.062l5.912 9.854c.851 1.415.194 2.573-1.456 2.573h-12c-1.65 0-2.307-1.159-1.456-2.573l5.912-9.854c.425-.708.983-1.062 1.544-1.062m0-2c-1.296 0-2.482.74-3.259 2.031l-5.912 9.856c-.786 1.309-.872 2.705-.235 3.83s1.879 1.772 3.406 1.772h12c1.527 0 2.77-.646 3.406-1.771s.551-2.521-.235-3.83l-5.912-9.854c-.777-1.294-1.963-2.034-3.259-2.034z"></path>
<circle cx="12" cy="16" r="1.3"></circle>
<path d="M13.5 10c0-.83-.671-1.5-1.5-1.5s-1.5.67-1.5 1.5c0 .199.041.389.111.562.554 1.376 1.389 3.438 1.389 3.438l1.391-3.438c.068-.173.109-.363.109-.562z"></path>
</svg>`:""}async function h(e,o="warning",n=1e4){o=o||"warning",n=n||1e4;let t=document.querySelector("#voicein-notification"),i;if(t)i=t.shadowRoot;else{t=ce(),i=t.attachShadow({mode:"open"});const c=document.createElement("link");c.rel="stylesheet",c.href=chrome.runtime.getURL("css/notification.css");const l=new Promise((k,x)=>{c.onload=k,c.onerror=x});i.appendChild(c);const s=`
a.external::after {
  content: '';
  width: 1em;
  height: 0.7em;
  padding-right: 0.5em;
  display: inline-block;
  position: relative;
  background-size: 100% 100% !important;
  background: url("${chrome.runtime.getURL("images/external-link.svg")}") no-repeat center;
  background-size: contain;
}
`,d=document.createElement("style");d.textContent=s,i.appendChild(d),await l;const g=document.createElement("div");g.setAttribute("class","box_container"),g.innerHTML=`
  <div class='box'>${le(o)}
    <span id='title'></span>
    <button id='close-btn' aria-label="close">[x]</button>
  </div>`,i.appendChild(g),i.querySelector("#close-btn").onclick=()=>{t.style.display="none"}}e=e||'You need to upgrade to <a href="https://dictanote.co/voicein/plus/">Voice In Plus</a> to use this command.';const a=i.querySelector("#title");a.innerHTML=e,t.style.display="block",setTimeout(()=>{t.style.display="none"},n)}let D;function se(e,o){const n=e.getElementById("voicein_error"),t=e.getElementById("voicein_error_message");t.innerHTML=o,n.style.display="block",clearTimeout(D),D=setTimeout(()=>{n.style.display="none"},8e3)}function re(e){e.querySelector("#voicein_spacebox").addEventListener("copy",n=>{n.stopPropagation()}),e.querySelector("#voicein_copy_spacebox").addEventListener("click",n=>{n.preventDefault();const t=e.getElementById("voicein_spacebox");window===window.top&&window.location.protocol==="https:"?navigator.clipboard.writeText(t.value).then(()=>{}).catch(i=>{console.error("Could not copy text: ",i)}):chrome.runtime.sendMessage({message_id:"copy_text",value:t.value})}),e.querySelector("#voicein_cut_spacebox").addEventListener("click",n=>{n.preventDefault();const t=e.getElementById("voicein_spacebox");window===window.top&&window.location.protocol==="https:"?navigator.clipboard.writeText(t.value).then(()=>{}).catch(i=>{console.error("Could not copy text: ",i)}):chrome.runtime.sendMessage({message_id:"copy_text",value:t.value}),t.value=""})}function de(e){const o=e.getElementById("voicein_select_lang");chrome.runtime.sendMessage({message_id:"update_language",language:o.value})}function ge(e,o,n){e.getElementById(o).value=n}async function we(e,o,n,t){const i={};i[o]=t;const a=await chrome.storage.local.get(i);ge(e,n,a[o])}function me(e){we(e,"stored_lang","voicein_select_lang","en-US")}function ue(e){const o=E();for(let n=0;n<o.length;n+=1)e.options[n]=new Option(o[n][1],o[n][0])}function pe(e){const o=e.getElementById("voicein_select_lang");ue(o)}async function R(e,o,n,t,i){const a=e.querySelector("#voicein_db"),c=e.querySelector("#voicein_pm"),l=e.querySelector("#voicein_di");if(!o){a.disabled=!0,c.disabled=!0,l.disabled=!0;return}a.disabled=!1,c.disabled=!1,l.disabled=!1,l.checked=localStorage.EnablePasteHandler==="true",n&&(e.querySelector("#voicein_settings").style.display="none");const s=window.location.host;t&&(e.querySelector("#voicein_spacebox_container").style.display="block",e.querySelector("#voicein_settings").style.display="flex",a.checked=!0),a.addEventListener("change",()=>{oe(e)}),c.checked=!0,i&&(c.checked=!1),c.addEventListener("change",()=>{ne(e)}),l.addEventListener("change",()=>{const{checked:d}=l;localStorage.EnablePasteHandler=d,u("DirectInsert",{domain:s,checked:d});const g=e.querySelector("#voicein_di_status");g.style.display="block",g.innerHTML="Refresh the page to apply changes."})}function y(e,o,n){window.scrollTo({behavior:"smooth",top:n})}function he(e){const o=document.querySelectorAll('a, button, div[role="button"]');for(let n of o)if(n.textContent.trim().toLowerCase()===e){n.click();return}h(`No ${e} button or link found on this page.`,"info",2e3),console.error(`No "${e}" button or link found on this page.`)}let L,A=!1,p=!1,_="",U=null,K=!1,q=!1,C=!1;async function ve(){if(document.getElementsByTagName("body").length===0||ee())return;const e=document.querySelector("#voicein_container");e&&e.parentNode.removeChild(e),chrome.runtime.onMessage.addListener(o=>{try{m(o),fe(o)}catch(n){console.error(n),X(n)}}),be(async()=>{if(await B().then(n=>n===!0,()=>!1)){p=!0;const n=b();v(n),m("DOM Loaded")}}),m("cs_top loaded")}function be(e){if(document.readyState!=="loading")e();else{let o=!1;const n=()=>{o||(o=!0,e())};document.addEventListener("DOMContentLoaded",n)}}async function G(){p&&chrome.runtime.sendMessage({message_id:"stop_recognition",silent:!0});let e=document.querySelector("#voicein-audioscribe");if(e)e.style.display="block";else{e=document.createElement("div"),e.setAttribute("id","voicein-audioscribe"),Object.assign(e.style,{position:"fixed",display:"block",width:"100vw",height:"100vh",top:"0",left:"0",border:"none",zIndex:"999999"}),document.documentElement.appendChild(e);const o=document.createElement("iframe");o.src=chrome.runtime.getURL("audioscribe.html"),o.allow="microphone; clipboard-read; clipboard-write",Object.assign(o.style,{width:"100%",height:"100%",border:"none"}),e.appendChild(o)}}function fe(e){switch(e.action){case"tab_activated":{if(e.recognizing){p=!0;const o=b();v(o)}break}case"tab_url_change":{if(e.recognizing){p=!0;const o=b();v(o)}break}case"on_results":{const o=S();Ie(o,e.txtToAdd);break}case"on_interim_results":Ae(e.txtToAdd);break;case"recognition_started_in_bg":{const o=S();if(o){I(o),O(o);const n=document.querySelector("#voicein_container");v(n),p||(o.querySelector("#voicein_spacebox_container").style.display==="block"&&o.querySelector("#voicein_spacebox").focus(),p=!0);const t=o.getElementById("voicein_voicebox");t&&(t.style.display="none",t.innerHTML="")}break}case"recognition_stopped_in_bg":{p=!1,_="",T();break}case"open_audio_scribe":{G();break}case"close_audio_scribe":{const o=document.querySelector("#voicein-audioscribe");o&&(o.style.display="none");break}case"lang_update":{const o=S();I(o);const n=E(),t=e.lang;let i="";for(let a=0;a<n.length;a+=1)if(n[a][0]===t){i=n[a][1];break}i&&h(`Language changed to ${i} (${t})`,"info",2e3);break}case"update_change_case":{const{changeCase:o}=e,n={df:"Default",sc:"Sentence case",lc:"lowercase",uc:"UPPERCASE",ce:"Capitalize Each Word"};m(`Text case changed to ${n[o]}`),n[o]&&h(`Text case changed to ${n[o]}`,"info",2e3);break}case"user_update":e.pro&&Y();break;case"show_error":{const o=S();se(o,e.message);break}case"show_notification":{h(e.message,e.type,e.duration);break}case"update_as_btn":{const o=F();o&&chrome.storage.local.get({disableASBtn:!1}).then(n=>{const t=n.disableASBtn?"none":"flex";o.querySelector("#audioscribe-btn").style.display=t});break}case"update_popup":{const o=F();o&&chrome.storage.local.get({disablePopup:!1}).then(n=>{const t=n.disablePopup?"none":"flex";o.querySelector("#voicein_settings").style.display=t});break}}}function ye(){let e=document.activeElement;for(e!=null&&e.shadowRoot!=null&&!K&&(u("ShadowRoot",{url:window.location.href}),K=!0);e!=null&&e.shadowRoot!=null;)e=e.shadowRoot.activeElement;return e}function O(e){const o=window.location.host;let n="";const t=`<h3>Voice In Plus Needed</h3>
  <p>Upgrade to <a class="mt" data-mt="help" href="https://dictanote.co/voicein/plus/?utm_source=extension&utm_medium=popup&utm_campaign=upgrade_prompt" target="_blank"><strong>Voice In Plus</strong></a> to dictate on this website.</p>

  <p class="m-10">üîó <a class="mt" data-mt="help" href="https://dictanote.co/voicein/plus/?utm_source=extension&utm_medium=popup&utm_campaign=upgrade_prompt" target="_blank"><strong>Upgrade Now ‚Üí</strong></a></p>

  <p>‚ùì Not sure? <a href="https://dictanote.co/voicein/apps/" target="_blank">Try it free on one of our supported sites</a> or get the <a class="mt" data-mt="help" href="https://dictanote.co/voicein/free-trial/?utm_source=extension&utm_medium=popup&utm_campaign=free_trial" target="_blank"><u><strong>5 day free trial ‚Üí</strong></u></a></p>

  <h4 class="m-10">Why Upgrade?</h4>
  <ul class="icon-list">
    <li><span class="icon">üöÄ</span><span class="text">Unlimited Dictation: Say goodbye to the 60‚Äëminute daily limit of the free version.</span></li>
    <li><span class="icon">üåü</span><span class="text">Advanced Mode: Dictate on all sites - no restrictions.</span></li>
    <li><span class="icon">üé§</span><span class="text">Custom Voice Commands: Correct errors, enter technical terms, and control the browser ‚Äî all by voice.</span></li>
    <li><span class="icon">‚ú®</span><span class="text">Plus <a class="mt" data-mt="help" href="https://dictanote.co/voicein/plus/?utm_source=extension&amp;utm_medium=popup&amp;utm_campaign=upgrade_prompt#pricing-included-features" target="_blank">unlock advanced features</a> to work faster and hands-free..</span></li>
  </ul>
  `,i='Enable <a class="mt" data-mt="help" href="https://dictanote.co/voicein/plus/?utm_source=extension&utm_medium=popup&utm_campaign=dictation_box" target="_blank">Dictation Box</a> to dictate on this site. Needs <a class="mt" data-mt="help" href="https://dictanote.co/voicein/plus/?utm_source=extension&utm_medium=popup&utm_campaign=dictation_box" target="_blank">Voice In Plus</a> upgrade.',a=`
  <h3>Compatibility Notice</h3>
 Voice In Plus may be needed to dictate on this site. Upgrade to <a href='https://dictanote.co/voicein/plus/'>Voice In Plus</a> to ensure full compatibility and avoid potential dictation issues.<br>
 
<h4><a class="mt" data-mt="help" href="https://dictanote.co/voicein/plus/?utm_source=extension&utm_medium=popup&utm_campaign=advanced_mode" target="_blank">Upgrade Now ‚Üí</a></h4>`,c=[];if(A){const l=e.querySelector("#voicein_help");l.style.display="none"}else{const l=e.querySelector("#voicein_help");let s=!1;P(o)||Q.indexOf(o)!==-1||(c.indexOf(o)!==-1?n=i:(s=[...Z,...J].some(g=>o.endsWith(g)),(o.startsWith("app.")||o.indexOf("crm")!==-1||o.indexOf("health")!==-1||o.indexOf("ehr")!==-1||o.indexOf("emr")!==-1)&&(s=!0),s?n=t:localStorage.viDisableHelp2||(n=a))),n?(l.style.display="block",e.querySelector("#voicein_help_message").innerHTML=n,s&&(l.classList.add("wide"),e.querySelector("#voicein_help .voicein_close").style.display="none")):l.style.display="none"}}function V(){const e=ye();let o=!1;return e&&(e.nodeName==="IFRAME"||e.nodeName==="INPUT"||e.nodeName==="TEXTAREA"||e.isContentEditable)&&(o=!0),{targetable:o,target:e}}async function I(e){const n=(await chrome.storage.local.get({stored_lang:"en-US"})).stored_lang;let t=null,i=null;const a=E();for(let c=0;c<a.length;c+=1)if(a[c][0]===n){t=a[c][1],i=a[c][2];break}t==null&&(t=n,i=n),e.getElementById("voicein_lang").innerText=i,e.getElementById("lang-name").innerText=`Lang: ${t}`}function _e(e,o,n){const t=document.createElement("button");t.id=o,t.innerHTML=n,t.addEventListener("click",i=>{i.preventDefault(),chrome.runtime.sendMessage({message_id:"update_language",language:n}),L&&L.focus()}),e.getElementById("voicein_ls").appendChild(t)}async function M(e,o,n,t){const i={};i[o]=t;const a=await chrome.storage.local.get(i);_e(e,n,a[o])}async function Se(e){const o=await chrome.runtime.sendMessage({message_id:"get_shortcuts"});o&&o.commands&&(e.querySelector("#voicein_current_ks").innerText=o.commands[0].shortcut)}async function Y(){const e=document.querySelector("#voicein_container");if(!e)return;const o=e.shadowRoot,n=o.querySelector("#voicein_modal"),t=o.querySelector("#voicein_popup_container");if(!n||!t)return;const i=await chrome.storage.local.get({disableASBtn:!1,pro:!1,disablePopup:!1,spacebox_domains:[],no_advancedmode_domains:[],showLS:!1});if(i.disableASBtn&&(o.querySelector("#audioscribe-btn").style.display="none"),!i.pro){R(o,!1);return}A=!0,O(o),o.querySelector("#voicein_upgrade").style.display="none",o.querySelectorAll(".plus-only").forEach(c=>{c.style.display="none"});const a=window.location.host;R(o,!0,i.disablePopup,i.spacebox_domains.includes(a),i.no_advancedmode_domains.includes(a)),i.showLS&&(M(o,"stored_lang1_ks","select_lang1_ks","en-US"),M(o,"stored_lang2_ks","select_lang2_ks","pt-BR"),M(o,"stored_lang3_ks","select_lang3_ks","es-ES"))}async function v(e){await U,e.style.display="block"}function T(){const e=document.querySelector("#voicein_container");if(e){if(e.shadowRoot){const o=e.shadowRoot;o.querySelector(".voicein_modal").style.display="none",C&&(C=!1,o.querySelector("#icon-svg").innerHTML=`${j}`)}e.style.display="none"}}async function ke(e){e.dest="player";const o=await chrome.runtime.sendMessage(e);if(o&&o.error)throw o.error;return o}async function B(){return ke({method:"isListening"})}const xe=`<svg height="18" width="18" aria-hidden="true" data-prefix="fas" data-icon="lock" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
<path fill="currentColor" d="M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z" class=""></path>
</svg>`,j=`<svg height="20" width="20" viewBox="0,0,2048,2048" focusable="false">
<path type="path" d="M 1640 850 l 280 40 v 268 l -280 40 q -53 165 -158 272 l 106 263 l -232 134 l -174 -222 q -103 19 -168 19 q -62 0 -148 -19 l -174 222 l -232 -134 l 106 -263 q -119 -124 -158 -272 l -280 -40 v -268 l 280 -40 q 51 -163 158 -272 l -106 -263 l 232 -134 l 174 222 q 96 -19 158 -19 q 68 0 158 19 l 174 -222 l 232 134 l -106 263 q 109 112 158 272 m -616 473 q 129 0 214 -92 q 85 -92 85 -207 q 0 -119 -87 -209 q -87 -90 -212 -90 q -122 0 -210 88 q -89 88 -89 211 q 0 118 87 209 q 87 90 212 90 z"></path>
<path type="path" d="M 1199 450 q -99 -23 -166 -23 q -81 0 -184 24 l -168 -214 l -167 96 l 101 253 q -131 134 -175 303 l -269 38 v 194 l 269 38 q 48 172 175 303 l -101 253 l 167 96 l 168 -213 q 100 23 166 23 q 64 0 184 -23 l 168 213 l 167 -96 l -101 -253 q 126 -132 175 -303 l 269 -38 v -194 l -269 -38 q -42 -163 -175 -303 l 101 -253 l -167 -96 m -343 1128 q -139 0 -240 -100 q -101 -101 -101 -241 q 0 -138 100 -239 q 100 -102 241 -102 q 139 0 240 101 q 101 101 101 240 q 0 135 -98 238 q -99 103 -243 103 m 322 -1239 l 295 170 l -109 273 q 96 108 141 243 l 290 41 v 342 l -290 41 q -45 135 -141 243 l 109 273 l -295 170 l -181 -230 q -85 15 -141 15 q -58 0 -141 -15 l -181 230 l -295 -170 l 109 -273 q -96 -108 -141 -243 l -290 -41 v -342 l 290 -41 q 45 -135 141 -243 l -109 -272 l 295 -171 l 181 230 q 80 -15 141 -15 q 76 0 141 15 m -141 924 q 112 0 184 -78 q 72 -79 72 -178 q 0 -100 -72 -178 q -72 -78 -184 -78 q -109 0 -182 80 q -74 79 -74 176 q 0 108 78 182 q 77 74 178 74 z"></path>
</svg>`;function Ee(){const e=`
  <div id="voicein_settings">
    <div id='voicein_icon'>
<i aria-hidden="true" class="vi-icon">
<span id="icon-svg">${j}<span>
<span id="popover" class="popover">Dictation Settings</span>
</i>
    </div>
    <div id='lang-container'>
      <span id='voicein_lang'>Settings</span>
      <span id="lang-name" class="popover">-</span>
    </div>
    <div id="fab-grabber-col">
      <div class="fab-grabber-container">
        <div class="fab-grabber">
          <div class="horizontal-group"><div class="movable-dot"></div><div class="movable-dot"></div></div>
          <div class="horizontal-group"><div class="movable-dot"></div><div class="movable-dot"></div></div>
          <div class="horizontal-group"><div class="movable-dot"></div><div class="movable-dot"></div></div>
          <div class="horizontal-group"><div class="movable-dot"></div><div class="movable-dot"></div></div>
          <div class="horizontal-group"><div class="movable-dot"></div><div class="movable-dot"></div></div>
        </div>
      </div>
    </div>
  </div>
  <div id="audioscribe-btn" class="voicein_menu_option">
    <a class="mt" data-mt="btn" href='#' title="Open AudioScribe">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="height: 16px;color: white;fill: white;"><path d="M224 96l16-32 32-16-32-16-16-32-16 32-32 16 32 16 16 32zM80 160l26.66-53.33L160 80l-53.34-26.67L80 0 53.34 53.33 0 80l53.34 26.67L80 160zm352 128l-26.66 53.33L352 368l53.34 26.67L432 448l26.66-53.33L512 368l-53.34-26.67L432 288zm70.62-193.77L417.77 9.38C411.53 3.12 403.34 0 395.15 0c-8.19 0-16.38 3.12-22.63 9.38L9.38 372.52c-12.5 12.5-12.5 32.76 0 45.25l84.85 84.85c6.25 6.25 14.44 9.37 22.62 9.37 8.19 0 16.38-3.12 22.63-9.37l363.14-363.15c12.5-12.48 12.5-32.75 0-45.24zM359.45 203.46l-50.91-50.91 86.6-86.6 50.91 50.91-86.6 86.6z"></path></svg>
      <span style='font-size: 13px; color: white; font-weight: bold;'>&nbsp;AudioScribe</span>
    </a>
  </div>
  <div id="voicein_upgrade" class="voicein_menu_option">
    <a class="mt" data-mt="btn" href="https://dictanote.co/voicein/plus/?utm_source=extension&utm_medium=popup&utm_campaign=upgrade_btn" target="_blank" title="Get Voice In Plus">
      <svg style='height: 16px' aria-hidden="true" focusable="false" data-prefix="fas" data-icon="bolt" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-bolt fa-w-10 fa-2x"><path fill="currentColor" d="M296 160H180.6l42.6-129.8C227.2 15 215.7 0 200 0H56C44 0 33.8 8.9 32.2 20.8l-32 240C-1.7 275.2 9.5 288 24 288h118.7L96.6 482.5c-3.6 15.2 8 29.5 23.3 29.5 8.4 0 16.4-4.4 20.8-12l176-304c9.3-15.9-2.2-36-20.7-36z" class=""></path></svg>
      <span style='font-size: 14px; font-weight: bold;'>&nbsp; Upgrade</span>
    </a>
  </div>
  <div id='voicein_spacebox_container'>
    <div><textarea id='voicein_spacebox'></textarea></div>
    <p style='background: black; margin:0; padding: 0; line-height: 20px; font-size: 12px;'>
      <a href='#' style='color: white; padding-left: 5px; text-decoration: none;' id='voicein_copy_spacebox'>Copy</a>
      <a href='#' style='color: white; padding-left: 10px; text-decoration: none;' id='voicein_cut_spacebox'>Cut</a>
      <span style='float:right; color: gray'><i>Dictation Box&nbsp;</i></span>
    </p>
  </div>
  <div id="voicein_help">
    <span class='voicein_close'>x</span>
    <div id="voicein_help_message"></div>
  </div>
  <div id="voicein_error">
    <span class='voicein_close'>x</span>
    <div id="voicein_error_message"></div>
  </div>
  <div id="voicein_ls">
  </div>
  `,o=`
  <div class="voicein_modal">
    <div class="voicein_modal_content">
      <span class="voicein_modal_close">&times;</span>
      <h1>Settings</h1>
      <div class='voicein_modal_section'>
        <p style='margin-top:20px;'><a href='${chrome.runtime.getURL("settings.html")}' target='_blank'>Go to Voice In Options Page ‚Üí</a></p>
      </div>
      <div class='voicein_modal_section'>
        <h4>Select your dictation language</h4>
        <select class='form-control' id="voicein_select_lang"></select>
      </div>
      <div class="voicein_modal_section">
        <h4>Advanced Mode <span class='plus-only'>üîí (only for <a class="mt" data-mt="modal" target='_blank' href='https://dictanote.co/voicein/plus/?utm_source=extension&utm_medium=modal&utm_campaign=advanced_mode'>plus users</a>)</span></h4>
        <div><input type='checkbox' id='voicein_pm'><label for='#voicein_pm'>Enable Advanced Mode on ${window.location.host}</label>
        <small id='voicein_pm_status'></small></div>
      </div>
      <div class="voicein_modal_section">
        <h4>Dictation Box <span class='plus-only'>üîí (only for <a class="mt" data-mt="modal" target='_blank' href='https://dictanote.co/voicein/plus/?utm_source=extension&utm_medium=modal&utm_campaign=dictation_box'>plus users</a>)</span></h4>
        <div><input type='checkbox' id='voicein_db'><label for='#voicein_db'>Show Dictation Box on ${window.location.host}</label></div>
      </div>
      <div class="voicein_modal_section">
        <h4>Keyboard Shortcut <span class='voicein_ks' id='voicein_current_ks'></span></h4>
      </div>
      <div class="voicein_modal_section">
        <h4>Voice Commands</h4>
        <p>Find all available voice commands <a href='https://dictanote.co/voicein/voicecommands/?utm_source=extension&utm_medium=modal&utm_campaign=voice_commands' target='_blank'>here</a></p>
      </div>
      <div class="voicein_modal_section">
          <p><a href='https://forum.dictanote.co' target='_blank'>Report Bug ‚Üí</a>&nbsp;&nbsp;&nbsp;&nbsp;
              <a href='https://dictanote.co/voicein/support/?utm_source=extension&utm_medium=modal&utm_campaign=support' target='_blank'>Help Center ‚Üí</a></p>
      </div>
      <div class="voicein_modal_section" style="color:#4285F4; font-size: 14px;">
      ‚ù§Ô∏è Voice In?</b> Please rate us on the <a href='https://dictanote.co/voicein/install/' target='_blank' style='text-decoration: underline; color:#4285F4;'>Chrome Web Store</a>
      </div>
      <details>
        <summary>Advanced</summary>
        <div class="warn">Don't modify these settings unless asked to by support.</div>
        <div class="voicein_modal_section">
          <h4>Enable Direct Insert <span class='plus-only'>üîí (only for <a class="mt" data-mt="modal" target='_blank' href='https://dictanote.co/voicein/plus/?utm_source=extension&utm_medium=modal&utm_campaign=advanced_mode'>plus users</a>)</span></h4>
          <div><input type='checkbox' id='voicein_di'><label for='#voicein_di'>Enable Direct Insert on ${window.location.host} to bypass website interference and add text directly at the cursor location. Enable only when Voice In isn't working on ${window.location.host}.</label>
          <small id='voicein_di_status'></small></div>
        </div>
        <div class="voicein_modal_section">
          <h4>Enable Debug Logs</h4>
          <div><input type='checkbox' id='voicein_debug'><label for='#voicein_debug'>Enable debug logs in the browser console.</label></div>
        </div>
      </details>
    </div>
  </div>`,n=document.createElement("div");n.setAttribute("id","voicein_voicebox_container");const t=document.createElement("div");t.setAttribute("id","voicein_voicebox"),t.style.display="none",n.appendChild(t);const i=document.createElement("div");i.setAttribute("id","voicein_popup_container"),i.classList.add("voicein_tr");const a=document.createElement("div");a.setAttribute("id","voicein_popup"),a.innerHTML=e,i.appendChild(a);const c=document.createElement("div");c.setAttribute("id","voicein_modal"),c.innerHTML=o;const l=document.createElement("div");l.setAttribute("id","voicein_container"),l.style.display="none",document.body?document.body.appendChild(l):document.documentElement.appendChild(l);const s=l.attachShadow({mode:"open"}),d=document.createElement("style");d.textContent=":host { all: initial;  display: block; }";const g=document.createElement("link");g.rel="stylesheet",g.href=chrome.runtime.getURL("css/page.css"),U=new Promise((r,w)=>{g.onload=r,g.onerror=w}),s.appendChild(d),s.appendChild(g),s.appendChild(n),s.appendChild(i),s.appendChild(c),s.querySelector("#audioscribe-btn").addEventListener("click",r=>{r.preventDefault(),r.stopPropagation(),G()}),s.addEventListener("click",r=>{let{target:w}=r;if(w.tagName!=="A"&&(w=w.parentNode),w.tagName==="A"&&w.classList.contains("mt")){const f=w.getAttribute("data-mt");u("VI Click Upgrade",{url:window.location.href,host:window.location.host,type:f})}}),document.addEventListener("visibilitychange",async()=>{if(document.visibilityState==="visible"){const r=document.querySelector("#voicein_container");r&&r.style.display==="block"&&(await B().then(f=>f===!0,()=>!1)||(m("hiding voicein container"),T()))}}),window.addEventListener("focus",async()=>{const r=document.querySelector("#voicein_container");r&&r.style.display==="block"&&(await B().then(f=>f===!0,()=>!1)||(m("hiding voicein container"),T()))});const k=i.querySelector("#voicein_help"),x=i.querySelector("#voicein_error");k.querySelector(".voicein_close").addEventListener("click",r=>{r.preventDefault(),localStorage.viDisableHelp2=!0,k.style.display="none"}),x.querySelector(".voicein_close").addEventListener("click",r=>{r.preventDefault(),x.style.display="none"}),Le(s),re(s),ae(s),I(s),Se(s);const Me=window.location.host;P(Me)&&(s.querySelector("#voicein_pm").checked=!0),Y(),document.addEventListener("keydown",r=>{r.keyCode===13&&p&&_&&(r.stopImmediatePropagation(),r.preventDefault(),chrome.runtime.sendMessage({message_id:"restart_recognition"}))},!0)}async function Le(e){const o=()=>{e.querySelector("#voicein_modal .voicein_modal").style.display="block",me(e)},n=()=>{m("Cursor Lock Enabled"),C=!0,e.querySelector("#icon-svg").innerHTML=`${xe}`,chrome.runtime.sendMessage({message_id:"cursor_lock"})};let t,i=!1;const a=()=>{i=!1,t=setTimeout(()=>{A&&(n(),i=!0)},4e3)},c=()=>{clearTimeout(t),i||o()},l=e.querySelector("#voicein_icon");l.addEventListener("mousedown",a),l.addEventListener("mouseup",c),l.addEventListener("mouseleave",()=>{clearTimeout(t)}),e.querySelector("#voicein_lang").onclick=o,pe(e),e.querySelector(".voicein_modal #voicein_select_lang").addEventListener("change",()=>{de(e)}),e.querySelector(".voicein_modal .voicein_modal_close").addEventListener("click",()=>{e.querySelector("#voicein_modal .voicein_modal").style.display="none"});const s=e.querySelector("#voicein_debug");s.checked=localStorage.viDebug==="true",s.addEventListener("change",d=>{localStorage.viDebug=d.target.checked})}function b(){const e=document.querySelector("#voicein_container");return e||(Ee(),document.querySelector("#voicein_container"))}function S(){return b().shadowRoot}function F(){const e=document.querySelector("#voicein_container");return e==null?void 0:e.shadowRoot}function Ae(e){const o=V();q||(o.targetable?(N(!0),q=!0):(N(!1),q=!0));const n=b();n.style.display==="none"&&v(n);const i=n.shadowRoot.getElementById("voicein_voicebox");i&&(i.style.display="block",i.innerHTML=e),_=e}function qe(e){for(let o=0;o<e.length;o+=1){let n=e[o];n.length>0&&n[0]===" "&&(n=n.slice(1),e[o]=n),n.length>0&&n[n.length-1]===" "&&(e[o]=n.slice(0,n.length-1))}}function Ce(e){switch(e){case"<scrolltop>":y(-1,1e3,0);break;case"<scrollbottom>":y(1,1e3,Math.max(document.body.scrollHeight-window.innerHeight,0));break;case"<scrollup>":y(-1,1e3,Math.max(window.scrollY-Math.max(window.innerHeight-100,0),0));break;case"<scrolldown>":y(1,1e3,window.scrollY+Math.max(window.innerHeight-100,0));break;case"<stop>":chrome.runtime.sendMessage({message_id:"stop_recognition"});break;default:if(e.startsWith("<click:")&&e.endsWith(">")){const o=e.substring(7,e.length-1).toLocaleLowerCase();he(o)}else return-1}return 0}function Ie(e,o){const n=e.getElementById("voicein_voicebox");n&&(n.style.display="none",n.innerHTML=""),_="";const t=V();if(t.targetable){L=t.target;const i=e.querySelector("#voicein_error");i&&i.style.display==="block"&&(i.style.display="none")}else{const i=o.split(/(<[a-z]+>)/g);i.length>1&&qe(i);for(let a=0;a<i.length;a+=1){const c=i[a];c&&c.startsWith("<")&&c.endsWith(">")&&Ce(c)}}o.indexOf("***")!==-1&&localStorage.viPFW!=="2"&&(h('You can disable profanity filter using custom voice commands. <a target="_blank" href="https://help.dictanote.co/plus/custom-voice-commands#id-01hedjng30mp5mezrm0swjq1cj">Learn more ‚Üí</a>'),localStorage.viPFW="2")}ve()})();
