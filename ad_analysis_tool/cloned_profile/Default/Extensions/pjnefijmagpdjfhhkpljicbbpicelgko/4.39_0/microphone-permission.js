const je=["classroom.google.com","outlook.live.com","docs.google.com","meet.google.com","translate.google.com","discord.com","www.messenger.com","www.linkedin.com","quizlet.com","www.teamwork.com","www.instagram.com","www.carousell.com.hk","outlook.office.com","outlook.office365.com","web.whatsapp.com","dictanote.co","localhost:8000","mail.yahoo.com","www.bing.com","www.twitch.tv","www.youtube.com","www.facebook.com","www.twitter.com","x.com","www.reddit.com","www.pinterest.com","www.google.com","www.google.ad","www.google.ae","www.google.com.af","www.google.com.ag","www.google.com.ai","www.google.al","www.google.am","www.google.co.ao","www.google.com.ar","www.google.as","www.google.at","www.google.com.au","www.google.az","www.google.ba","www.google.com.bd","www.google.be","www.google.bf","www.google.bg","www.google.com.bh","www.google.bi","www.google.bj","www.google.com.bn","www.google.com.bo","www.google.com.br","www.google.bs","www.google.bt","www.google.co.bw","www.google.by","www.google.com.bz","www.google.ca","www.google.cd","www.google.cf","www.google.cg","www.google.ch","www.google.ci","www.google.co.ck","www.google.cl","www.google.cm","www.google.cn","www.google.com.co","www.google.co.cr","www.google.com.cu","www.google.cv","www.google.com.cy","www.google.cz","www.google.de","www.google.dj","www.google.dk","www.google.dm","www.google.com.do","www.google.dz","www.google.com.ec","www.google.ee","www.google.com.eg","www.google.es","www.google.com.et","www.google.fi","www.google.com.fj","www.google.fm","www.google.fr","www.google.ga","www.google.ge","www.google.gg","www.google.com.gh","www.google.com.gi","www.google.gl","www.google.gm","www.google.gr","www.google.com.gt","www.google.gy","www.google.com.hk","www.google.hn","www.google.hr","www.google.ht","www.google.hu","www.google.co.id","www.google.ie","www.google.co.il","www.google.im","www.google.co.in","www.google.iq","www.google.is","www.google.it","www.google.je","www.google.com.jm","www.google.jo","www.google.co.jp","www.google.co.ke","www.google.com.kh","www.google.ki","www.google.kg","www.google.co.kr","www.google.com.kw","www.google.kz","www.google.la","www.google.com.lb","www.google.li","www.google.lk","www.google.co.ls","www.google.lt","www.google.lu","www.google.lv","www.google.com.ly","www.google.co.ma","www.google.md","www.google.me","www.google.mg","www.google.mk","www.google.ml","www.google.com.mm","www.google.mn","www.google.ms","www.google.com.mt","www.google.mu","www.google.mv","www.google.mw","www.google.com.mx","www.google.com.my","www.google.co.mz","www.google.com.na","www.google.com.ng","www.google.com.ni","www.google.ne","www.google.nl","www.google.no","www.google.com.np","www.google.nr","www.google.nu","www.google.co.nz","www.google.com.om","www.google.com.pa","www.google.com.pe","www.google.com.pg","www.google.com.ph","www.google.com.pk","www.google.pl","www.google.pn","www.google.com.pr","www.google.ps","www.google.pt","www.google.com.py","www.google.com.qa","www.google.ro","www.google.ru","www.google.rw","www.google.com.sa","www.google.com.sb","www.google.sc","www.google.se","www.google.com.sg","www.google.sh","www.google.si","www.google.sk","www.google.com.sl","www.google.sn","www.google.so","www.google.sm","www.google.sr","www.google.st","www.google.com.sv","www.google.td","www.google.tg","www.google.co.th","www.google.com.tj","www.google.tl","www.google.tm","www.google.tn","www.google.to","www.google.com.tr","www.google.tt","www.google.com.tw","www.google.co.tz","www.google.com.ua","www.google.co.ug","www.google.co.uk","www.google.com.uy","www.google.co.uz","www.google.com.vc","www.google.co.ve","www.google.vg","www.google.co.vi","www.google.com.vn","www.google.vu","www.google.ws","www.google.rs","www.google.co.za","www.google.co.zm","www.google.co.zw","www.google.cat","chat.openai.com","chatgpt.com","teams.microsoft.com","classx.org","gemini.google.com","www.overleaf.com","www.notion.so","www.remnote.com","chat.mistral.ai","copilot.microsoft.com","www.perplexity.ai","huggingface.co","character.ai","grok.com","aistudio.google.com","chat.deepseek.com","www.meta.ai","chat.qwenlm.ai","app.gradally.com","www.duolingo.com","github.com","flowgpt.com"],Ze=[".instructure.com","canvas."];function _e(e){return je.indexOf(e)!==-1||Ze.some(t=>e.includes(t))}const qe=[".zendesk.com",".force.com",".salesforce.com",".salesforce-sites.com",".hubspot.com","app.jasper.ai",".athenahealth.com",".atlassian.net",".simplepractice.com",".slack.com",".webpt.com",".clickup.com",".therapynotes.com",".clinicient.com",".qualtrics.com",".freshdesk.com",".sharepoint.com",".service-now.com",".site.com",".freshchat.com",".logisticsbackoffice.com",".kipuworks.com",".ecwcloud.com",".followupboss.com",".pipedrive.com",".intercom.com","doctornow.io",".moderationinterface.com",".versncr.com",".kareo.com",".growtherapy.com",".drchrono.com",".gohighlevel.com",".redtailtechnology.com",".heimlich.com","otranscribe.com",".gold-chat.net","app.asana.com",".practicefusion.com",".intuit.com",".intellect.com","dynamics.microsoft.com",".oracle.com",".sap.com",".sugarcrm.com",".freshworks.com",".insightly.com",".bitrix24.com",".creatio.com",".netsuite.com",".odoo.com",".vtiger.com",".teledentix.com",".mouthwatch.com",".dentulu.com",".denteractive.com",".toothpic.com",".virtualdentalcare.com",".smilevirtual.com",".aligntech.com",".candidco.com",".ortholive.com","theranest.com",".valant.io",".therapyappointment.com","luminello.com","counsol.com",".myclientsplus.com",".eclinicalworks.com",".advancedmd.com",".cerner.com",".meditech.com",".epic.com",".nextgen.com",".chargebee.com",".zoominfo.com",".shopify.com",".wordpress.com",".wordpress.org",".zoho.com",".apptivo.com",".act.com",".salesmate.io",".nimble.com",".close.com",".copper.com",".keap.com",".agilecrm.com","capsulecrm.com",".lessannoyingcrm.com",".pipelinecrm.com",".nutshell.com","salesflare.com","highrisehq.com",".pipelinercrm.com",".wrike.com",".smartsheet.com",".monday.com",".redbooth.com",".basecamp.com",".teamwork.com",".podio.com",".backlog.com",".proofhub.com",".livechat.com",".helpscout.net",".tidio.com",".crisp.chat",".olark.com",".kayako.com",".liveagent.com",".userlike.com",".happyfox.com",".freshcaller.com",".proton.me",".fastmail.com",".hiverhq.com",".spikenow.com",".superhuman.com",".missiveapp.com",".frontapp.com",".hey.com",".zimbra.com",".peopleperhour.com",".truelancer.com",".freelancer.com",".upwork.com",".guru.com",".fiverr.com",".upwork.com",".toptal.com",".weworkremotely.com",".codeable.io",".cloudpeeps.com",".gocatalant.com",".lever.co",".indeed.com",".outreach.io",".greenhouse.io",".loom.com",".miro.com",".coda.io",".asktetra.com",".otter.ai"],Xe=["pi.ai"],Je=["www.dating.com","textspins.com","limpado.com","www.evernote.com","mail.google.com","mail.zoho.com","pjnefijmagpdjfhhkpljicbbpicelgko","kcflpifkhnpaikpneeilcaoimgdodikg","claude.ai"];function F(...e){localStorage.viDebug==="true"&&console.log("[VI][T]",...e)}function K(e,t){F("VI [MP]",e,t),chrome.runtime.sendMessage({message_id:"mp_track",category:e,info:t})}function Qe(e){const t=(window.location.href||"").slice(0,60);let o="";e.stack&&(o+=e.stack.substring(0,300).split(`
`).join("")),K("JSError-CST",{action:e.toString(),label:o,url:t})}function xe(e){K("V Page View",{host:window.location.hostname,href:window.location.href,status:e})}function et(){return document.contentType?document.contentType.startsWith("application/xml")||document.contentType.startsWith("text/xml")||document.contentType.startsWith("application/xhtml+xml"):!1}function He(e,t){for(let o=0;o<t.length;o+=1)t[o]===e&&t.splice(o,1)}async function tt(e){const{checked:t}=e.querySelector("#voicein_db"),o=e.querySelector("#voicein_spacebox_container"),c=await chrome.storage.local.get({spacebox_domains:[]}),s=window.location.host,m=c.spacebox_domains;t?(m.indexOf(s)===-1&&(m.push(s),K("DictationBox",{domain:s})),o.style.display="block"):(He(s,m),o.style.display="none");const w={spacebox_domains:m};chrome.storage.local.set(w)}async function ot(e){const{checked:t}=e.querySelector("#voicein_pm"),o=await chrome.storage.local.get({no_advancedmode_domains:[]}),c=window.location.host,s=o.no_advancedmode_domains;t?(He(c,s),K("NoAdvancedMode",{domain:c,advancedMode:!0})):s.indexOf(c)===-1&&(s.push(c),K("NoAdvancedMode",{domain:c,advancedMode:!1}));const m={no_advancedmode_domains:s};chrome.storage.local.set(m);const w=e.querySelector("#voicein_pm_status");w.style.display="block",w.innerHTML="Refresh the page to apply changes."}function ke(){let e=[];return navigator.userAgent.indexOf("Edg")>-1?e=[...Te,...at]:e=[...Te,...nt],e.sort((t,o)=>t[1].localeCompare(o[1])),e}const Te=[["af-ZA","Afrikaans (South Africa)","Afrikaans"],["sq-AL","Albanian (Albania)","Albanian"],["am-ET","Amharic (Ethiopia)","Amharic"],["ar-DZ","Arabic (Algeria)","Arabic (AL)"],["ar-BH","Arabic (Bahrain)","Arabic (BH)"],["ar-EG","Arabic (Egypt)","Arabic (EG)"],["ar-IQ","Arabic (Iraq)","Arabic (IQ)"],["ar-IL","Arabic (Israel)","Arabic (IL)"],["ar-JO","Arabic (Jordan)","Arabic (JO)"],["ar-KW","Arabic (Kuwait)","Arabic (KW)"],["ar-LB","Arabic (Lebanon)","Arabic (LB)"],["ar-MA","Arabic (Morocco)","Arabic (MO)"],["ar-OM","Arabic (Oman)","Arabic (OM)"],["ar-QA","Arabic (Qatar)","Arabic (QA)"],["ar-SA","Arabic (Saudi Arabia)","Arabic (SA)"],["ar-PS","Arabic (Palestine)","Arabic (Pa)"],["ar-TN","Arabic (Tunisia)","Arabic (TN)"],["ar-AE","Arabic (UAE)","Arabic (UA)"],["ar-YE","Arabic (Yemen)","Arabic (YE)"],["hy-AM","Armenian (Armenia)","Armenian"],["az-AZ","Azerbaijani (Azerbaijan)","Azerbaijani"],["eu-ES","Basque (Spain)","Basque"],["bn-IN","Bengali (India)","Bengali (IN)"],["bs-BA","Bosnian (Bosnia and Herzegovina)","Bosnian"],["bg-BG","Bulgarian (Bulgaria)","Bulgarian"],["my-MM","Burmese (Myanmar)","Burmese"],["ca-ES","Catalan (Spain)","Catalan"],["hr-HR","Croatian (Croatia)","Croatian"],["cs-CZ","Czech (Czech Republic)","Czech"],["da-DK","Danish (Denmark)","Danish"],["nl-BE","Dutch (Belgium)","Dutch (BE)"],["nl-NL","Dutch (Netherlands)","Dutch (NL)"],["en-AU","English (Australia)","English (AU)"],["en-CA","English (Canada)","English (CA)"],["en-GH","English (Ghana)","English (GH)"],["en-HK","English (Hong Kong)","English (HK)"],["en-IN","English (India)","English (IN)"],["en-IE","English (Ireland)","English (IE)"],["en-KE","English (Kenya)","English (KE)"],["en-NZ","English (New Zealand)","English (NZ)"],["en-NG","English (Nigeria)","English (NG)"],["en-PH","English (Philippines)","English (PH)"],["en-SG","English (Singapore)","English (SG)"],["en-ZA","English (South Africa)","English (SA)"],["en-TZ","English (Tanzania)","English (TZ)"],["en-GB","English (United Kingdom)","English (UK)"],["en-US","English (United States)","English (US)"],["et-EE","Estonian (Estonia)","Estonian"],["fil-PH","Filipino (Philippines)","Filipino"],["fi-FI","Finnish (Finland)","Finnish"],["fr-BE","French (Belgium)","French (BE)"],["fr-CA","French (Canada)","French (CA)"],["fr-FR","French (France)","French (FR)"],["fr-CH","French (Switzerland)","French (CH)"],["gl-ES","Galician (Spain)","Galician"],["ka-GE","Georgian (Georgia)","Georgian"],["de-AT","German (Austria)","German (AT)"],["de-DE","German (Germany)","German"],["de-CH","German (Switzerland)","German (CH)"],["el-GR","Greek (Greece)","Greek"],["gu-IN","Gujarati (India)","Gujarati"],["hi-IN","Hindi (India)","Hindi"],["hu-HU","Hungarian (Hungary)","Hungarian"],["is-IS","Icelandic (Iceland)","Icelandic"],["id-ID","Indonesian (Indonesia)","Indonesian"],["it-IT","Italian (Italy)","Italian"],["it-CH","Italian (Switzerland)","Italian (CH)"],["ja-JP","Japanese (Japan)","Japanese"],["jv-ID","Javanese (Indonesia)","Javanese"],["kn-IN","Kannada (India)","Kannada"],["km-KH","Khmer (Cambodia)","Khmer"],["ko-KR","Korean (South Korea)","Korean"],["lo-LA","Lao (Laos)","Lao"],["lv-LV","Latvian (Latvia)","Latvian"],["lt-LT","Lithuanian (Lithuania)","Lithuanian"],["mk-MK","Macedonian (North Macedonia)","Macedonian"],["ms-MY","Malay (Malaysia)","Malay"],["ml-IN","Malayalam (India)","Malayalam (IN)"],["mr-IN","Marathi (India)","Marathi"],["mn-MN","Mongolian (Mongolia)","Mongolian"],["ne-NP","Nepali (Nepal)","Nepali"],["fa-IR","Persian (Iran)","Persian"],["pl-PL","Polish (Poland)","Polish"],["pt-BR","Portuguese (Brazil)","Port. (BR)"],["pt-PT","Portuguese (Portugal)","Portuguese"],["ro-RO","Romanian (Romania)","Romanian"],["ru-RU","Russian (Russia)","Russian"],["sr-RS","Serbian (Serbia)","Serbian"],["si-LK","Sinhala (Sri Lanka)","Sinhala"],["sk-SK","Slovak (Slovakia)","Slovak"],["sl-SI","Slovenian (Slovenia)","Slovenian"],["es-AR","Spanish (Argentina)","Spanish (AR)"],["es-BO","Spanish (Bolivia)","Spanish (BO)"],["es-CL","Spanish (Chile)","Spanish (CL)"],["es-CO","Spanish (Colombia)","Spanish (CO)"],["es-CR","Spanish (Costa Rica)","Spanish (CR)"],["es-DO","Spanish (Dominican Republic)","Spanish (DR)"],["es-EC","Spanish (Ecuador)","Spanish (EC)"],["es-SV","Spanish (El Salvador)","Spanish (SV)"],["es-GT","Spanish (Guatemala)","Spanish (GT)"],["es-HN","Spanish (Honduras)","Spanish (HO)"],["es-MX","Spanish (Mexico)","Spanish (MX)"],["es-NI","Spanish (Nicaragua)","Spanish (NI)"],["es-PA","Spanish (Panama)","Spanish (PA)"],["es-PY","Spanish (Paraguay)","Spanish (PY)"],["es-PE","Spanish (Peru)","Spanish (PE)"],["es-PR","Spanish (Puerto Rico)","Spanish (PR)"],["es-ES","Spanish (Spain)","Spanish"],["es-US","Spanish (United States)","Spanish (US)"],["es-UY","Spanish (Uruguay)","Spanish (UY)"],["es-VE","Spanish (Venezuela)","Spanish (VE)"],["sw-KE","Swahili (Kenya)","Swahili (KE)"],["sw-TZ","Swahili (Tanzania)","Swahili (TZ)"],["sv-SE","Swedish (Sweden)","Swedish"],["ta-IN","Tamil (India)","Tamil"],["te-IN","Telugu (India)","Telugu"],["th-TH","Thai (Thailand)","Thai"],["tr-TR","Turkish (Turkey)","Turkish"],["uk-UA","Ukrainian (Ukraine)","Ukrainian"],["uz-UZ","Uzbek (Uzbekistan)","Uzbek"],["vi-VN","Vietnamese (Vietnam)","Vietnamese"],["zu-ZA","Zulu (South Africa)","Zulu"]],nt=[["bn-BD","Bengali (Bangladesh)","Bengali (BD)"],["yue-Hant-HK","Cantonese (Hong Kong)","Cantonese (HK)"],["en-PK","English (Pakistan)","English (PK)"],["iw-IL","Hebrew (Israel)","Hebrew (IL)"],["cmn-Hans-CN","Mandarin (China)","Mandarin (CN)"],["cmn-Hant-TW","Mandarin (Taiwan)","Mandarin (TW)"],["no-NO","Norwegian Bokm√•l (Norway)","Norwegian (NO)"],["pa-Guru-IN","Punjabi (Gurmukhi India)","Punjabi (IN)"],["su-ID","Sundanese (Indonesia)","Sundanese (ID)"],["ta-MY","Tamil (Malaysia)","Tamil (MY)"],["ta-SG","Tamil (Singapore)","Tamil (SG)"],["ta-LK","Tamil (Sri Lanka)","Tamil (LK)"],["ur-IN","Urdu (India)","Urdu (IN)"],["ur-PK","Urdu (Pakistan)","Urdu (PK)"]],at=[["ar-LY","Arabic (Libya)","Arabic (LY)"],["ar-SY","Arabic (Syria)","Arabic (SY)"],["zh-HK","Chinese (Cantonese, Traditional)","Cantonese (HK)"],["zh-CN","Chinese (Mandarin, Simplified)","Mandarin (CN)"],["zh-TW","Chinese (Taiwanese Mandarin)","Mandarin (TW)"],["he-IL","Hebrew (Israel)","Hebrew (IL)"],["ga-IE","Irish (Ireland)","Irish (IE)"],["kk-KZ","Kazakh (Kazakhstan)","Kazakh (KZ)"],["mt-MT","Maltese (Malta)","Maltese (MT)"],["nb-NO","Norwegian (Bokm√•l, Norway)","Norwegian (NO)"],["ps-AF","Pashto (Afghanistan)","Pashto (AF)"],["so-SO","Somali (Somalia)","Somali (SO)"],["es-CU","Spanish (Cuba)","Spanish (CU)"],["es-GQ","Spanish (Equatorial Guinea)","Spanish (GQ)"],["cy-GB","Welsh (United Kingdom)","Welsh (GB)"]];function it(e){const t=e.querySelector("#fab-grabber-col"),o=e.querySelector("#voicein_popup_container");let c=0,s=0,m=!1;function w(h){let f=c+(h-s);return f<40&&(f=40),f>window.innerHeight-100&&(f=window.innerHeight-100),f}if(t.addEventListener("mousedown",h=>{h.preventDefault(),m=!0,c=e.querySelector("#voicein_settings").getBoundingClientRect().y,s=h.clientY}),window.addEventListener("mouseup",h=>{if(m){const{clientY:f}=h,_=w(f);localStorage.VoiceInTopY=_,m=!1}}),window.addEventListener("mousemove",h=>{if(!m)return;h.preventDefault();const{clientY:f}=h,_=w(f);o.style.top=`${_}px`}),localStorage.VoiceInTopY){let h=parseInt(localStorage.VoiceInTopY,10);Number.isNaN(h)||(h<40&&(h=40),h>window.innerHeight-100&&(h=window.innerHeight-100),o.style.top=`${h}px`)}}function ct(){const e=document.createElement("div");return e.setAttribute("id","voicein-notification"),e.style.display="none",document.documentElement.appendChild(e),e}function st(e){return e==="warning"?`<svg title="warning icon" width="1em" height="1em" style="fill: #333" aria-hidden="true" version="1.2" baseProfile="tiny" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
<path d="M12 5.511c.561 0 1.119.354 1.544 1.062l5.912 9.854c.851 1.415.194 2.573-1.456 2.573h-12c-1.65 0-2.307-1.159-1.456-2.573l5.912-9.854c.425-.708.983-1.062 1.544-1.062m0-2c-1.296 0-2.482.74-3.259 2.031l-5.912 9.856c-.786 1.309-.872 2.705-.235 3.83s1.879 1.772 3.406 1.772h12c1.527 0 2.77-.646 3.406-1.771s.551-2.521-.235-3.83l-5.912-9.854c-.777-1.294-1.963-2.034-3.259-2.034z"></path>
<circle cx="12" cy="16" r="1.3"></circle>
<path d="M13.5 10c0-.83-.671-1.5-1.5-1.5s-1.5.67-1.5 1.5c0 .199.041.389.111.562.554 1.376 1.389 3.438 1.389 3.438l1.391-3.438c.068-.173.109-.363.109-.562z"></path>
</svg>`:""}async function Q(e,t="warning",o=1e4){t=t||"warning",o=o||1e4;let c=document.querySelector("#voicein-notification"),s;if(c)s=c.shadowRoot;else{c=ct(),s=c.attachShadow({mode:"open"});const w=document.createElement("link");w.rel="stylesheet",w.href=chrome.runtime.getURL("css/notification.css");const h=new Promise((P,L)=>{w.onload=P,w.onerror=L});s.appendChild(w);const f=`
a.external::after {
  content: '';
  width: 1em;
  height: 0.7em;
  padding-right: 0.5em;
  display: inline-block;
  position: relative;
  background-size: 100% 100% !important;
  background: url("${chrome.runtime.getURL("images/external-link.svg")}") no-repeat center;
  background-size: contain;
}
`,_=document.createElement("style");_.textContent=f,s.appendChild(_),await h;const k=document.createElement("div");k.setAttribute("class","box_container"),k.innerHTML=`
  <div class='box'>${st(t)}
    <span id='title'></span>
    <button id='close-btn' aria-label="close">[x]</button>
  </div>`,s.appendChild(k),s.querySelector("#close-btn").onclick=()=>{c.style.display="none"}}e=e||'You need to upgrade to <a href="https://dictanote.co/voicein/plus/">Voice In Plus</a> to use this command.';const m=s.querySelector("#title");m.innerHTML=e,c.style.display="block",setTimeout(()=>{c.style.display="none"},o)}let Ce;function lt(e,t){const o=e.getElementById("voicein_error"),c=e.getElementById("voicein_error_message");c.innerHTML=t,o.style.display="block",clearTimeout(Ce),Ce=setTimeout(()=>{o.style.display="none"},8e3)}function rt(e){e.querySelector("#voicein_spacebox").addEventListener("copy",o=>{o.stopPropagation()}),e.querySelector("#voicein_copy_spacebox").addEventListener("click",o=>{o.preventDefault();const c=e.getElementById("voicein_spacebox");window===window.top&&window.location.protocol==="https:"?navigator.clipboard.writeText(c.value).then(()=>{}).catch(s=>{console.error("Could not copy text: ",s)}):chrome.runtime.sendMessage({message_id:"copy_text",value:c.value})}),e.querySelector("#voicein_cut_spacebox").addEventListener("click",o=>{o.preventDefault();const c=e.getElementById("voicein_spacebox");window===window.top&&window.location.protocol==="https:"?navigator.clipboard.writeText(c.value).then(()=>{}).catch(s=>{console.error("Could not copy text: ",s)}):chrome.runtime.sendMessage({message_id:"copy_text",value:c.value}),c.value=""})}function dt(e){const t=e.getElementById("voicein_select_lang");chrome.runtime.sendMessage({message_id:"update_language",language:t.value})}function gt(e,t,o){e.getElementById(t).value=o}async function ut(e,t,o,c){const s={};s[t]=c;const m=await chrome.storage.local.get(s);gt(e,o,m[t])}function pt(e){ut(e,"stored_lang","voicein_select_lang","en-US")}function mt(e){const t=ke();for(let o=0;o<t.length;o+=1)e.options[o]=new Option(t[o][1],t[o][0])}function wt(e){const t=e.getElementById("voicein_select_lang");mt(t)}async function Ae(e,t,o,c,s){const m=e.querySelector("#voicein_db"),w=e.querySelector("#voicein_pm"),h=e.querySelector("#voicein_di");if(!t){m.disabled=!0,w.disabled=!0,h.disabled=!0;return}m.disabled=!1,w.disabled=!1,h.disabled=!1,h.checked=localStorage.EnablePasteHandler==="true",o&&(e.querySelector("#voicein_settings").style.display="none");const f=window.location.host;c&&(e.querySelector("#voicein_spacebox_container").style.display="block",e.querySelector("#voicein_settings").style.display="flex",m.checked=!0),m.addEventListener("change",()=>{tt(e)}),w.checked=!0,s&&(w.checked=!1),w.addEventListener("change",()=>{ot(e)}),h.addEventListener("change",()=>{const{checked:_}=h;localStorage.EnablePasteHandler=_,K("DirectInsert",{domain:f,checked:_});const k=e.querySelector("#voicein_di_status");k.style.display="block",k.innerHTML="Refresh the page to apply changes."})}function U(e,t,o){window.scrollTo({behavior:"smooth",top:o})}function ze(e){const t=document.querySelectorAll('a, button, div[role="button"]');for(let o of t)if(o.textContent.trim().toLowerCase()===e){o.click();return}Q(`No ${e} button or link found on this page.`,"info",2e3),console.error(`No "${e}" button or link found on this page.`)}let we,Se=!1,O=!1,re="",De=null,Le=!1,ge=!1,he=!1;async function ht(){if(document.getElementsByTagName("body").length===0||et())return;const e=document.querySelector("#voicein_container");e&&e.parentNode.removeChild(e),chrome.runtime.onMessage.addListener(t=>{try{F(t),bt(t)}catch(o){console.error(o),Qe(o)}}),ft(async()=>{if(await ve().then(o=>o===!0,()=>!1)){O=!0;const o=te();ee(o),F("DOM Loaded")}}),F("cs_top loaded")}function ft(e){if(document.readyState!=="loading")e();else{let t=!1;const o=()=>{t||(t=!0,e())};document.addEventListener("DOMContentLoaded",o)}}async function Re(){O&&chrome.runtime.sendMessage({message_id:"stop_recognition",silent:!0});let e=document.querySelector("#voicein-audioscribe");if(e)e.style.display="block";else{e=document.createElement("div"),e.setAttribute("id","voicein-audioscribe"),Object.assign(e.style,{position:"fixed",display:"block",width:"100vw",height:"100vh",top:"0",left:"0",border:"none",zIndex:"999999"}),document.documentElement.appendChild(e);const t=document.createElement("iframe");t.src=chrome.runtime.getURL("audioscribe.html"),t.allow="microphone; clipboard-read; clipboard-write",Object.assign(t.style,{width:"100%",height:"100%",border:"none"}),e.appendChild(t)}}function bt(e){switch(e.action){case"tab_activated":{if(e.recognizing){O=!0;const t=te();ee(t)}break}case"tab_url_change":{if(e.recognizing){O=!0;const t=te();ee(t)}break}case"on_results":{const t=ae();Lt(t,e.txtToAdd);break}case"on_interim_results":Tt(e.txtToAdd);break;case"recognition_started_in_bg":{const t=ae();if(t){fe(t),Be(t);const o=document.querySelector("#voicein_container");ee(o),O||(t.querySelector("#voicein_spacebox_container").style.display==="block"&&t.querySelector("#voicein_spacebox").focus(),O=!0);const c=t.getElementById("voicein_voicebox");c&&(c.style.display="none",c.innerHTML="")}break}case"recognition_stopped_in_bg":{O=!1,re="",be();break}case"open_audio_scribe":{Re();break}case"close_audio_scribe":{const t=document.querySelector("#voicein-audioscribe");t&&(t.style.display="none");break}case"lang_update":{const t=ae();fe(t);const o=ke(),c=e.lang;let s="";for(let m=0;m<o.length;m+=1)if(o[m][0]===c){s=o[m][1];break}s&&Q(`Language changed to ${s} (${c})`,"info",2e3);break}case"update_change_case":{const{changeCase:t}=e,o={df:"Default",sc:"Sentence case",lc:"lowercase",uc:"UPPERCASE",ce:"Capitalize Each Word"};F(`Text case changed to ${o[t]}`),o[t]&&Q(`Text case changed to ${o[t]}`,"info",2e3);break}case"user_update":e.pro&&Ue();break;case"show_error":{const t=ae();lt(t,e.message);break}case"show_notification":{Q(e.message,e.type,e.duration);break}case"update_as_btn":{const t=Me();t&&chrome.storage.local.get({disableASBtn:!1}).then(o=>{const c=o.disableASBtn?"none":"flex";t.querySelector("#audioscribe-btn").style.display=c});break}case"update_popup":{const t=Me();t&&chrome.storage.local.get({disablePopup:!1}).then(o=>{const c=o.disablePopup?"none":"flex";t.querySelector("#voicein_settings").style.display=c});break}}}function vt(){let e=document.activeElement;for(e!=null&&e.shadowRoot!=null&&!Le&&(K("ShadowRoot",{url:window.location.href}),Le=!0);e!=null&&e.shadowRoot!=null;)e=e.shadowRoot.activeElement;return e}function Be(e){const t=window.location.host;let o="";const c=`<h3>Voice In Plus Needed</h3>
  <p>Upgrade to <a class="mt" data-mt="help" href="https://dictanote.co/voicein/plus/?utm_source=extension&utm_medium=popup&utm_campaign=upgrade_prompt" target="_blank"><strong>Voice In Plus</strong></a> to dictate on this website.</p>

  <p class="m-10">üîó <a class="mt" data-mt="help" href="https://dictanote.co/voicein/plus/?utm_source=extension&utm_medium=popup&utm_campaign=upgrade_prompt" target="_blank"><strong>Upgrade Now ‚Üí</strong></a></p>

  <p>‚ùì Not sure? <a href="https://dictanote.co/voicein/apps/" target="_blank">Try it free on one of our supported sites</a> or get the <a class="mt" data-mt="help" href="https://dictanote.co/voicein/free-trial/?utm_source=extension&utm_medium=popup&utm_campaign=free_trial" target="_blank"><u><strong>5 day free trial ‚Üí</strong></u></a></p>

  <h4 class="m-10">Why Upgrade?</h4>
  <ul class="icon-list">
    <li><span class="icon">üöÄ</span><span class="text">Unlimited Dictation: Say goodbye to the 60‚Äëminute daily limit of the free version.</span></li>
    <li><span class="icon">üåü</span><span class="text">Advanced Mode: Dictate on all sites - no restrictions.</span></li>
    <li><span class="icon">üé§</span><span class="text">Custom Voice Commands: Correct errors, enter technical terms, and control the browser ‚Äî all by voice.</span></li>
    <li><span class="icon">‚ú®</span><span class="text">Plus <a class="mt" data-mt="help" href="https://dictanote.co/voicein/plus/?utm_source=extension&amp;utm_medium=popup&amp;utm_campaign=upgrade_prompt#pricing-included-features" target="_blank">unlock advanced features</a> to work faster and hands-free..</span></li>
  </ul>
  `,s='Enable <a class="mt" data-mt="help" href="https://dictanote.co/voicein/plus/?utm_source=extension&utm_medium=popup&utm_campaign=dictation_box" target="_blank">Dictation Box</a> to dictate on this site. Needs <a class="mt" data-mt="help" href="https://dictanote.co/voicein/plus/?utm_source=extension&utm_medium=popup&utm_campaign=dictation_box" target="_blank">Voice In Plus</a> upgrade.',m=`
  <h3>Compatibility Notice</h3>
 Voice In Plus may be needed to dictate on this site. Upgrade to <a href='https://dictanote.co/voicein/plus/'>Voice In Plus</a> to ensure full compatibility and avoid potential dictation issues.<br>
 
<h4><a class="mt" data-mt="help" href="https://dictanote.co/voicein/plus/?utm_source=extension&utm_medium=popup&utm_campaign=advanced_mode" target="_blank">Upgrade Now ‚Üí</a></h4>`,w=[];if(Se){const h=e.querySelector("#voicein_help");h.style.display="none"}else{const h=e.querySelector("#voicein_help");let f=!1;_e(t)||Je.indexOf(t)!==-1||(w.indexOf(t)!==-1?o=s:(f=[...qe,...Xe].some(k=>t.endsWith(k)),(t.startsWith("app.")||t.indexOf("crm")!==-1||t.indexOf("health")!==-1||t.indexOf("ehr")!==-1||t.indexOf("emr")!==-1)&&(f=!0),f?o=c:localStorage.viDisableHelp2||(o=m))),o?(h.style.display="block",e.querySelector("#voicein_help_message").innerHTML=o,f&&(h.classList.add("wide"),e.querySelector("#voicein_help .voicein_close").style.display="none")):h.style.display="none"}}function Oe(){const e=vt();let t=!1;return e&&(e.nodeName==="IFRAME"||e.nodeName==="INPUT"||e.nodeName==="TEXTAREA"||e.isContentEditable)&&(t=!0),{targetable:t,target:e}}async function fe(e){const o=(await chrome.storage.local.get({stored_lang:"en-US"})).stored_lang;let c=null,s=null;const m=ke();for(let w=0;w<m.length;w+=1)if(m[w][0]===o){c=m[w][1],s=m[w][2];break}c==null&&(c=o,s=o),e.getElementById("voicein_lang").innerText=s,e.getElementById("lang-name").innerText=`Lang: ${c}`}function yt(e,t,o){const c=document.createElement("button");c.id=t,c.innerHTML=o,c.addEventListener("click",s=>{s.preventDefault(),chrome.runtime.sendMessage({message_id:"update_language",language:o}),we&&we.focus()}),e.getElementById("voicein_ls").appendChild(c)}async function ue(e,t,o,c){const s={};s[t]=c;const m=await chrome.storage.local.get(s);yt(e,o,m[t])}async function _t(e){const t=await chrome.runtime.sendMessage({message_id:"get_shortcuts"});t&&t.commands&&(e.querySelector("#voicein_current_ks").innerText=t.commands[0].shortcut)}async function Ue(){const e=document.querySelector("#voicein_container");if(!e)return;const t=e.shadowRoot,o=t.querySelector("#voicein_modal"),c=t.querySelector("#voicein_popup_container");if(!o||!c)return;const s=await chrome.storage.local.get({disableASBtn:!1,pro:!1,disablePopup:!1,spacebox_domains:[],no_advancedmode_domains:[],showLS:!1});if(s.disableASBtn&&(t.querySelector("#audioscribe-btn").style.display="none"),!s.pro){Ae(t,!1);return}Se=!0,Be(t),t.querySelector("#voicein_upgrade").style.display="none",t.querySelectorAll(".plus-only").forEach(w=>{w.style.display="none"});const m=window.location.host;Ae(t,!0,s.disablePopup,s.spacebox_domains.includes(m),s.no_advancedmode_domains.includes(m)),s.showLS&&(ue(t,"stored_lang1_ks","select_lang1_ks","en-US"),ue(t,"stored_lang2_ks","select_lang2_ks","pt-BR"),ue(t,"stored_lang3_ks","select_lang3_ks","es-ES"))}async function ee(e){await De,e.style.display="block"}function be(){const e=document.querySelector("#voicein_container");if(e){if(e.shadowRoot){const t=e.shadowRoot;t.querySelector(".voicein_modal").style.display="none",he&&(he=!1,t.querySelector("#icon-svg").innerHTML=`${Fe}`)}e.style.display="none"}}async function kt(e){e.dest="player";const t=await chrome.runtime.sendMessage(e);if(t&&t.error)throw t.error;return t}async function ve(){return kt({method:"isListening"})}const St=`<svg height="18" width="18" aria-hidden="true" data-prefix="fas" data-icon="lock" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
<path fill="currentColor" d="M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z" class=""></path>
</svg>`,Fe=`<svg height="20" width="20" viewBox="0,0,2048,2048" focusable="false">
<path type="path" d="M 1640 850 l 280 40 v 268 l -280 40 q -53 165 -158 272 l 106 263 l -232 134 l -174 -222 q -103 19 -168 19 q -62 0 -148 -19 l -174 222 l -232 -134 l 106 -263 q -119 -124 -158 -272 l -280 -40 v -268 l 280 -40 q 51 -163 158 -272 l -106 -263 l 232 -134 l 174 222 q 96 -19 158 -19 q 68 0 158 19 l 174 -222 l 232 134 l -106 263 q 109 112 158 272 m -616 473 q 129 0 214 -92 q 85 -92 85 -207 q 0 -119 -87 -209 q -87 -90 -212 -90 q -122 0 -210 88 q -89 88 -89 211 q 0 118 87 209 q 87 90 212 90 z"></path>
<path type="path" d="M 1199 450 q -99 -23 -166 -23 q -81 0 -184 24 l -168 -214 l -167 96 l 101 253 q -131 134 -175 303 l -269 38 v 194 l 269 38 q 48 172 175 303 l -101 253 l 167 96 l 168 -213 q 100 23 166 23 q 64 0 184 -23 l 168 213 l 167 -96 l -101 -253 q 126 -132 175 -303 l 269 -38 v -194 l -269 -38 q -42 -163 -175 -303 l 101 -253 l -167 -96 m -343 1128 q -139 0 -240 -100 q -101 -101 -101 -241 q 0 -138 100 -239 q 100 -102 241 -102 q 139 0 240 101 q 101 101 101 240 q 0 135 -98 238 q -99 103 -243 103 m 322 -1239 l 295 170 l -109 273 q 96 108 141 243 l 290 41 v 342 l -290 41 q -45 135 -141 243 l 109 273 l -295 170 l -181 -230 q -85 15 -141 15 q -58 0 -141 -15 l -181 230 l -295 -170 l 109 -273 q -96 -108 -141 -243 l -290 -41 v -342 l 290 -41 q 45 -135 141 -243 l -109 -272 l 295 -171 l 181 230 q 80 -15 141 -15 q 76 0 141 15 m -141 924 q 112 0 184 -78 q 72 -79 72 -178 q 0 -100 -72 -178 q -72 -78 -184 -78 q -109 0 -182 80 q -74 79 -74 176 q 0 108 78 182 q 77 74 178 74 z"></path>
</svg>`;function Et(){const e=`
  <div id="voicein_settings">
    <div id='voicein_icon'>
<i aria-hidden="true" class="vi-icon">
<span id="icon-svg">${Fe}<span>
<span id="popover" class="popover">Dictation Settings</span>
</i>
    </div>
    <div id='lang-container'>
      <span id='voicein_lang'>Settings</span>
      <span id="lang-name" class="popover">-</span>
    </div>
    <div id="fab-grabber-col">
      <div class="fab-grabber-container">
        <div class="fab-grabber">
          <div class="horizontal-group"><div class="movable-dot"></div><div class="movable-dot"></div></div>
          <div class="horizontal-group"><div class="movable-dot"></div><div class="movable-dot"></div></div>
          <div class="horizontal-group"><div class="movable-dot"></div><div class="movable-dot"></div></div>
          <div class="horizontal-group"><div class="movable-dot"></div><div class="movable-dot"></div></div>
          <div class="horizontal-group"><div class="movable-dot"></div><div class="movable-dot"></div></div>
        </div>
      </div>
    </div>
  </div>
  <div id="audioscribe-btn" class="voicein_menu_option">
    <a class="mt" data-mt="btn" href='#' title="Open AudioScribe">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="height: 16px;color: white;fill: white;"><path d="M224 96l16-32 32-16-32-16-16-32-16 32-32 16 32 16 16 32zM80 160l26.66-53.33L160 80l-53.34-26.67L80 0 53.34 53.33 0 80l53.34 26.67L80 160zm352 128l-26.66 53.33L352 368l53.34 26.67L432 448l26.66-53.33L512 368l-53.34-26.67L432 288zm70.62-193.77L417.77 9.38C411.53 3.12 403.34 0 395.15 0c-8.19 0-16.38 3.12-22.63 9.38L9.38 372.52c-12.5 12.5-12.5 32.76 0 45.25l84.85 84.85c6.25 6.25 14.44 9.37 22.62 9.37 8.19 0 16.38-3.12 22.63-9.37l363.14-363.15c12.5-12.48 12.5-32.75 0-45.24zM359.45 203.46l-50.91-50.91 86.6-86.6 50.91 50.91-86.6 86.6z"></path></svg>
      <span style='font-size: 13px; color: white; font-weight: bold;'>&nbsp;AudioScribe</span>
    </a>
  </div>
  <div id="voicein_upgrade" class="voicein_menu_option">
    <a class="mt" data-mt="btn" href="https://dictanote.co/voicein/plus/?utm_source=extension&utm_medium=popup&utm_campaign=upgrade_btn" target="_blank" title="Get Voice In Plus">
      <svg style='height: 16px' aria-hidden="true" focusable="false" data-prefix="fas" data-icon="bolt" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-bolt fa-w-10 fa-2x"><path fill="currentColor" d="M296 160H180.6l42.6-129.8C227.2 15 215.7 0 200 0H56C44 0 33.8 8.9 32.2 20.8l-32 240C-1.7 275.2 9.5 288 24 288h118.7L96.6 482.5c-3.6 15.2 8 29.5 23.3 29.5 8.4 0 16.4-4.4 20.8-12l176-304c9.3-15.9-2.2-36-20.7-36z" class=""></path></svg>
      <span style='font-size: 14px; font-weight: bold;'>&nbsp; Upgrade</span>
    </a>
  </div>
  <div id='voicein_spacebox_container'>
    <div><textarea id='voicein_spacebox'></textarea></div>
    <p style='background: black; margin:0; padding: 0; line-height: 20px; font-size: 12px;'>
      <a href='#' style='color: white; padding-left: 5px; text-decoration: none;' id='voicein_copy_spacebox'>Copy</a>
      <a href='#' style='color: white; padding-left: 10px; text-decoration: none;' id='voicein_cut_spacebox'>Cut</a>
      <span style='float:right; color: gray'><i>Dictation Box&nbsp;</i></span>
    </p>
  </div>
  <div id="voicein_help">
    <span class='voicein_close'>x</span>
    <div id="voicein_help_message"></div>
  </div>
  <div id="voicein_error">
    <span class='voicein_close'>x</span>
    <div id="voicein_error_message"></div>
  </div>
  <div id="voicein_ls">
  </div>
  `,t=`
  <div class="voicein_modal">
    <div class="voicein_modal_content">
      <span class="voicein_modal_close">&times;</span>
      <h1>Settings</h1>
      <div class='voicein_modal_section'>
        <p style='margin-top:20px;'><a href='${chrome.runtime.getURL("settings.html")}' target='_blank'>Go to Voice In Options Page ‚Üí</a></p>
      </div>
      <div class='voicein_modal_section'>
        <h4>Select your dictation language</h4>
        <select class='form-control' id="voicein_select_lang"></select>
      </div>
      <div class="voicein_modal_section">
        <h4>Advanced Mode <span class='plus-only'>üîí (only for <a class="mt" data-mt="modal" target='_blank' href='https://dictanote.co/voicein/plus/?utm_source=extension&utm_medium=modal&utm_campaign=advanced_mode'>plus users</a>)</span></h4>
        <div><input type='checkbox' id='voicein_pm'><label for='#voicein_pm'>Enable Advanced Mode on ${window.location.host}</label>
        <small id='voicein_pm_status'></small></div>
      </div>
      <div class="voicein_modal_section">
        <h4>Dictation Box <span class='plus-only'>üîí (only for <a class="mt" data-mt="modal" target='_blank' href='https://dictanote.co/voicein/plus/?utm_source=extension&utm_medium=modal&utm_campaign=dictation_box'>plus users</a>)</span></h4>
        <div><input type='checkbox' id='voicein_db'><label for='#voicein_db'>Show Dictation Box on ${window.location.host}</label></div>
      </div>
      <div class="voicein_modal_section">
        <h4>Keyboard Shortcut <span class='voicein_ks' id='voicein_current_ks'></span></h4>
      </div>
      <div class="voicein_modal_section">
        <h4>Voice Commands</h4>
        <p>Find all available voice commands <a href='https://dictanote.co/voicein/voicecommands/?utm_source=extension&utm_medium=modal&utm_campaign=voice_commands' target='_blank'>here</a></p>
      </div>
      <div class="voicein_modal_section">
          <p><a href='https://forum.dictanote.co' target='_blank'>Report Bug ‚Üí</a>&nbsp;&nbsp;&nbsp;&nbsp;
              <a href='https://dictanote.co/voicein/support/?utm_source=extension&utm_medium=modal&utm_campaign=support' target='_blank'>Help Center ‚Üí</a></p>
      </div>
      <div class="voicein_modal_section" style="color:#4285F4; font-size: 14px;">
      ‚ù§Ô∏è Voice In?</b> Please rate us on the <a href='https://dictanote.co/voicein/install/' target='_blank' style='text-decoration: underline; color:#4285F4;'>Chrome Web Store</a>
      </div>
      <details>
        <summary>Advanced</summary>
        <div class="warn">Don't modify these settings unless asked to by support.</div>
        <div class="voicein_modal_section">
          <h4>Enable Direct Insert <span class='plus-only'>üîí (only for <a class="mt" data-mt="modal" target='_blank' href='https://dictanote.co/voicein/plus/?utm_source=extension&utm_medium=modal&utm_campaign=advanced_mode'>plus users</a>)</span></h4>
          <div><input type='checkbox' id='voicein_di'><label for='#voicein_di'>Enable Direct Insert on ${window.location.host} to bypass website interference and add text directly at the cursor location. Enable only when Voice In isn't working on ${window.location.host}.</label>
          <small id='voicein_di_status'></small></div>
        </div>
        <div class="voicein_modal_section">
          <h4>Enable Debug Logs</h4>
          <div><input type='checkbox' id='voicein_debug'><label for='#voicein_debug'>Enable debug logs in the browser console.</label></div>
        </div>
      </details>
    </div>
  </div>`,o=document.createElement("div");o.setAttribute("id","voicein_voicebox_container");const c=document.createElement("div");c.setAttribute("id","voicein_voicebox"),c.style.display="none",o.appendChild(c);const s=document.createElement("div");s.setAttribute("id","voicein_popup_container"),s.classList.add("voicein_tr");const m=document.createElement("div");m.setAttribute("id","voicein_popup"),m.innerHTML=e,s.appendChild(m);const w=document.createElement("div");w.setAttribute("id","voicein_modal"),w.innerHTML=t;const h=document.createElement("div");h.setAttribute("id","voicein_container"),h.style.display="none",document.body?document.body.appendChild(h):document.documentElement.appendChild(h);const f=h.attachShadow({mode:"open"}),_=document.createElement("style");_.textContent=":host { all: initial;  display: block; }";const k=document.createElement("link");k.rel="stylesheet",k.href=chrome.runtime.getURL("css/page.css"),De=new Promise((y,A)=>{k.onload=y,k.onerror=A}),f.appendChild(_),f.appendChild(k),f.appendChild(o),f.appendChild(s),f.appendChild(w),f.querySelector("#audioscribe-btn").addEventListener("click",y=>{y.preventDefault(),y.stopPropagation(),Re()}),f.addEventListener("click",y=>{let{target:A}=y;if(A.tagName!=="A"&&(A=A.parentNode),A.tagName==="A"&&A.classList.contains("mt")){const W=A.getAttribute("data-mt");K("VI Click Upgrade",{url:window.location.href,host:window.location.host,type:W})}}),document.addEventListener("visibilitychange",async()=>{if(document.visibilityState==="visible"){const y=document.querySelector("#voicein_container");y&&y.style.display==="block"&&(await ve().then(W=>W===!0,()=>!1)||(F("hiding voicein container"),be()))}}),window.addEventListener("focus",async()=>{const y=document.querySelector("#voicein_container");y&&y.style.display==="block"&&(await ve().then(W=>W===!0,()=>!1)||(F("hiding voicein container"),be()))});const P=s.querySelector("#voicein_help"),L=s.querySelector("#voicein_error");P.querySelector(".voicein_close").addEventListener("click",y=>{y.preventDefault(),localStorage.viDisableHelp2=!0,P.style.display="none"}),L.querySelector(".voicein_close").addEventListener("click",y=>{y.preventDefault(),L.style.display="none"}),xt(f),rt(f),it(f),fe(f),_t(f);const N=window.location.host;_e(N)&&(f.querySelector("#voicein_pm").checked=!0),Ue(),document.addEventListener("keydown",y=>{y.keyCode===13&&O&&re&&(y.stopImmediatePropagation(),y.preventDefault(),chrome.runtime.sendMessage({message_id:"restart_recognition"}))},!0)}async function xt(e){const t=()=>{e.querySelector("#voicein_modal .voicein_modal").style.display="block",pt(e)},o=()=>{F("Cursor Lock Enabled"),he=!0,e.querySelector("#icon-svg").innerHTML=`${St}`,chrome.runtime.sendMessage({message_id:"cursor_lock"})};let c,s=!1;const m=()=>{s=!1,c=setTimeout(()=>{Se&&(o(),s=!0)},4e3)},w=()=>{clearTimeout(c),s||t()},h=e.querySelector("#voicein_icon");h.addEventListener("mousedown",m),h.addEventListener("mouseup",w),h.addEventListener("mouseleave",()=>{clearTimeout(c)}),e.querySelector("#voicein_lang").onclick=t,wt(e),e.querySelector(".voicein_modal #voicein_select_lang").addEventListener("change",()=>{dt(e)}),e.querySelector(".voicein_modal .voicein_modal_close").addEventListener("click",()=>{e.querySelector("#voicein_modal .voicein_modal").style.display="none"});const f=e.querySelector("#voicein_debug");f.checked=localStorage.viDebug==="true",f.addEventListener("change",_=>{localStorage.viDebug=_.target.checked})}function te(){const e=document.querySelector("#voicein_container");return e||(Et(),document.querySelector("#voicein_container"))}function ae(){return te().shadowRoot}function Me(){const e=document.querySelector("#voicein_container");return e==null?void 0:e.shadowRoot}function Tt(e){const t=Oe();ge||(t.targetable?(xe(!0),ge=!0):(xe(!1),ge=!0));const o=te();o.style.display==="none"&&ee(o);const s=o.shadowRoot.getElementById("voicein_voicebox");s&&(s.style.display="block",s.innerHTML=e),re=e}function Ct(e){for(let t=0;t<e.length;t+=1){let o=e[t];o.length>0&&o[0]===" "&&(o=o.slice(1),e[t]=o),o.length>0&&o[o.length-1]===" "&&(e[t]=o.slice(0,o.length-1))}}function At(e){switch(e){case"<scrolltop>":U(-1,1e3,0);break;case"<scrollbottom>":U(1,1e3,Math.max(document.body.scrollHeight-window.innerHeight,0));break;case"<scrollup>":U(-1,1e3,Math.max(window.scrollY-Math.max(window.innerHeight-100,0),0));break;case"<scrolldown>":U(1,1e3,window.scrollY+Math.max(window.innerHeight-100,0));break;case"<stop>":chrome.runtime.sendMessage({message_id:"stop_recognition"});break;default:if(e.startsWith("<click:")&&e.endsWith(">")){const t=e.substring(7,e.length-1).toLocaleLowerCase();ze(t)}else return-1}return 0}function Lt(e,t){const o=e.getElementById("voicein_voicebox");o&&(o.style.display="none",o.innerHTML=""),re="";const c=Oe();if(c.targetable){we=c.target;const s=e.querySelector("#voicein_error");s&&s.style.display==="block"&&(s.style.display="none")}else{const s=t.split(/(<[a-z]+>)/g);s.length>1&&Ct(s);for(let m=0;m<s.length;m+=1){const w=s[m];w&&w.startsWith("<")&&w.endsWith(">")&&At(w)}}t.indexOf("***")!==-1&&localStorage.viPFW!=="2"&&(Q('You can disable profanity filter using custom voice commands. <a target="_blank" href="https://help.dictanote.co/plus/custom-voice-commands#id-01hedjng30mp5mezrm0swjq1cj">Learn more ‚Üí</a>'),localStorage.viPFW="2")}ht();function V(e){try{return localStorage[e]}catch{return null}}const I="¬†";String.prototype.replaceAll||(String.prototype.replaceAll=function(e,t){return this.split(e).join(t)});function T(...e){V("viDebug")==="true"&&console.log("[VI]",...e)}function Mt(e){return e.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;")}let x;const Ne=[".","?","!",`
`],ie=/(<[a-zA-Z0-9:+-_]+?>)/g;let Y=!1;var B=!1;let pe=!1,$=!1,H=!1,R="",z=!1,D=!1,se=!1,E="",le="";const Nt=["www.notion.so","www.youtube.com","classroom.google.com","wordpress.com","dictanote.co","localhost:8000","app.slack.com","www.deepl.com","app.gohighlevel.com","crm.eldersell.com","hemingwayapp.com","app.gitbook.com","www.ebay.com","x.com","admin.shopify.com"],It=[];let J="";function Pt(){chrome.runtime.onMessage.addListener(e=>{try{T(e),qt(e)}catch(t){console.error(t),ye(t)}}),T("cs_all loaded"),document.body&&document.body.classList.contains("voicein_ready")&&document.body.classList.remove("voicein_ready")}async function qt(e){switch(e.action){case"tab_activated":{e.recognizing&&(e.url&&(R=e.url),z||(z=!0,await X()));break}case"tab_url_change":{e.recognizing&&(e.url&&(R=e.url),z||(z=!0,await X()));break}case"on_results":{e.url&&(R=e.url),J=e.lang,z||(z=!0,await X()),Ft(e.txtToAdd,e.cursorLock);break}case"on_interim_results":{le=e.txtToAdd;break}case"recognition_started_in_bg":e.url&&(R=e.url),z||(z=!0,await X());break;case"user_update":{e.url&&(R=e.url),e.pro&&(z=!0,await X());break}case"update_change_case":{D=e.changeCase;break}}}function Ht(e,t){return e==="docs.google.com"&&(t.startsWith("/document/")||t.startsWith("/presentation/"))||e==="writer.zoho.com"||e==="blog.naver.com"}function zt(e,t){chrome.runtime.sendMessage({message_id:"mp_track",category:e,info:t})}function ye(e){const t=(R||window.location.href||"").slice(0,60);let o="";e.stack&&(o+=e.stack.substring(0,300).split(`
`).join("")),zt("JSError-CSA",{action:e.toString(),label:o,url:t})}function ce(e){return new Promise(t=>setTimeout(t,e))}function j(){try{let e=window.location;return(e.host===""||e.protocol!=="http:"&&e.protocol!=="https:")&&(e=new URL(R)),e.host}catch{return"unknown.com"}}function Dt(){try{return new URL(R).host}catch{return"unknown.com"}}function Rt(){try{let e=window.location;return(e.host===""||e.protocol!=="http:"&&e.protocol!=="https:")&&(e=new URL(R)),e.pathname}catch{return"unknown.com"}}function Bt(){let e=document.activeElement;if(!e||e.tagName==="IFRAME")return null;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Z(){const e=document.activeElement;return!e||e.tagName==="IFRAME"?null:document}function Ie(){let e=document.activeElement,t=document;if(!e||e.tagName==="IFRAME")return null;for(;e&&e.shadowRoot;)t=e.shadowRoot,e=e.shadowRoot.activeElement;return t}function Pe(){const e=document.activeElement;return!e||e.tagName==="IFRAME"?null:window}function Ot(){const e=Bt();let t=!1;return e&&(e.nodeName==="INPUT"||e.nodeName==="TEXTAREA"||e.isContentEditable)&&document.hasFocus()&&(t=!0),{targetable:t,target:e}}const G={backspace:8,return:13,z:90};function me(e,t){let o=e.ownerDocument,c=!1;const s={data:null,bubbles:!0,composed:!0,cancelable:!0,isComposing:!1};function m(f,_){return new window.InputEvent(f,_)}function w(f,_,k,P=!1,L=!1,N=!1,y=!1){return new KeyboardEvent(f,{key:_,code:`Key${_.toUpperCase()}`,keyCode:k,charCode:k,windowsVirtualKeyCode:k,nativeVirtualKeyCode:k,macCharCode:k,unmodifiedText:_,text:_,ctrlKey:P,metaKey:L,shiftKey:N,altKey:y,bubbles:!0,cancelable:!0})}function h(f){T("[EVENT DISPATCHED]",f.type,f),e.dispatchEvent(f)}if(t.keyCode===G.backspace){if(t.type==="input")return;s.inputType="deleteContentBackward",c=m(t.type,s)}else t.keyCode===G.return?e instanceof window.HTMLInputElement?t.type==="beforeinput"&&(s.inputType="insertLineBreak",c=m(t.type,s)):t.type==="input"?o.execCommand("insertParagraph"):t.type==="beforeinput"?(s.inputType="insertParagraph",c=m(t.type,s)):(s.data=`
`,c=m(t.type,s)):t.keyCode===G.z&&(t.ctrlKey||t.metaKey)&&(c=w(t.type,"z",G.z,t.ctrlKey,t.metaKey));if(c)return h(c),c.defaultPrevented}function Ut(e){function t(n){return n.replace(/\S/,a=>a.toUpperCase())}function o(n){for(let a=0;a<Ne.length;a+=1){const i=Ne[a];if(n.slice(n.length-i.length)===i)return!0}return!1}function c(n,a){let i="";switch(n.tagName){case"INPUT":case"TEXTAREA":{const d=n.value,r=n.selectionStart,g=Math.max(0,r-a);i=d.substring(g,r),i.indexOf(`
`)!==-1&&(i=i.slice(i.lastIndexOf(`
`)+1));break}case"DIV":case"P":default:{const d=Ie();if(d&&d.getSelection){const r=d.getSelection();if(!r.rangeCount)return"";const g=r.getRangeAt(0),u=["SPAN","FONT","B","I","U","A","STRIKE","STRONG","EM"];let l=g.startContainer,p=g.startOffset,v=a;for(;l;){if(l.nodeType===Node.TEXT_NODE)if(p-v>0){const b=p-v;i=l.textContent.substring(b,p)+i;break}else i=l.textContent.substring(0,p)+i,v-=p;if(l.nodeType===Node.ELEMENT_NODE&&p>0){for(l=l.childNodes[p-1];l.lastChild;)l=l.lastChild;l.nodeType===Node.TEXT_NODE?p=l.textContent.length:p=0;continue}if(l.nodeType===Node.ELEMENT_NODE&&p===0&&u.indexOf(l.nodeName)===-1)break;if(l.previousSibling){if(l=l.previousSibling,l.nodeType!==Node.TEXT_NODE&&u.indexOf(l.nodeName)===-1)break;for(;l.lastChild;)l=l.lastChild;l.nodeType===Node.TEXT_NODE?p=l.textContent.length:p=0}else{if(l=l.parentNode,l)p=0;else break;if(u.indexOf(l.nodeName)===-1)break}}}}}return i=i.replaceAll("‚Äã",""),i=i.replaceAll("‚Å†",""),i=i.replaceAll("\uFEFF",""),i}function s(n,a,i){const d=" ";function r(v,b){let S=v.lastIndexOf(d,b-1);const M=v.lastIndexOf(`
`,b-1);if(i&&(S=-1),S===-1&&M===-1)return 0;let C=Math.max(S,M);for(;C>0&&(v[C-1]===d||v[C-1]===`
`);)C-=1;return C}const g=n.selectionStart,u=n.value;let l=g;for(let v=0;v<a&&(l=r(u,l),l!==0);v+=1);const p=u.slice(0,l)+u.slice(g);n.value=p,n.setSelectionRange(l,l)}async function m(n,a,i){if(n.tagName==="INPUT"||n.tagName==="TEXTAREA"){s(n,a,i);return}const d=["SPAN","FONT","B","I","U","A","STRIKE","STRONG"],r=" ";i&&(a=1e3);function g(l){let p=l.previousSibling;if(!p){const{parentNode:v}=l;return d.indexOf(v.nodeName)!==-1?g(v):null}for(;p.nodeType!==3&&(p.nodeType===1&&d.indexOf(p.nodeName)!==-1);)p=p.childNodes[p.childNodes.length-1];return p.nodeType===3?p:null}const u=Ie();if(u&&u.getSelection){const l=u.getSelection().getRangeAt(0);if(l.collapse(!1),l.collapsed){const p=l.startContainer,v=l.startOffset;let b=p,S=v,M=0,C=0;if(b.nodeType!==3){let q;S!==b.childNodes.length?q=g(b.childNodes[S]):q=g(b),q?(b=q,S=q.textContent.length):M=a}for(;M<a;){const ne=b.textContent.lastIndexOf(r,S-1);if(ne!==-1)M+=1,C+=S-ne,S=ne;else{const de=g(b);if(de)b=de,C+=S,S=de.textContent.length;else{C+=S,S=0;break}}}for(let q=0;q<C;q+=1)me(n,{keyCode:G.backspace,type:"beforeinput"})||document.execCommand("delete"),await ce(1)}}}function w(n,a,i){if(["yue-Hant-HK","ja-JP","cmn-Hans-CN","cmn-Hant-TW","zh-HK","zh-CN","zh-TW","th-TH","km-KH","my-MM","lo-LA"].indexOf(J)===-1){T(`prev text:"${a}"`);const r=a.length>0&&[`
`," ",I].indexOf(a[a.length-1])!==-1;if(a=((l,p)=>{let v=l.length;for(;v>0&&p.includes(l[v-1]);)v-=1;return l.slice(0,v)})(a,[" ",I]),D==="ce")n=n.replace(/(^\w{1})|(\s+\w{1})/g,l=>l.toUpperCase());else if(D==="lc")n=n.toLocaleLowerCase();else if(D==="uc")n=n.toLocaleUpperCase();else{const l=D==="lc"||D==="uc";!l&&(o(a)||a.length===0||a===""||a===void 0||a==="null")&&(n=t(n)),!l&&J.startsWith("en-")&&(n=n.replace(/\bi\b/g,()=>"I"))}let u;J.startsWith("fr-")?u=[".",",",")","‚Äô","‚Äù"," ",I,"-","‚Äì","`",`
`]:u=[".",",",";",":","?","!",")","‚Äô","‚Äù"," ",I,"-","‚Äì","`",`
`],a.length>0&&!r&&["(","/","‚Äò","‚Äú","-","‚Äì","`","‚Äô"].indexOf(a[a.length-1])===-1&&u.indexOf(n[0])===-1&&(n=` ${n}`)}else if(J==="th-TH"&&n.length>0&&a.length>0){let r=!1,g=!1;/[a-zA-Z]/.test(a[a.length-1])&&(r=!0),/[a-zA-Z]/.test(n[0])&&(g=!0),(!r&&g||r&&!g&&n[0]!==" ")&&(n=` ${n}`)}return T(`finalText "${n}"`),n}function h(n){const a=j(),i=Z(),d=Pe();if(!i.body.classList.contains("voicein_ready")){const r=Nt.indexOf(a)!==-1,g=V("EnablePasteHandler")==="true";let u=window.location.href.indexOf("wp-admin")!==-1;try{window.location.href.startsWith("blob:")&&window.parent&&window.parent.window.location.href.indexOf("wp-admin")!==-1&&(u=!0)}catch(p){T("Cannot access parent window:",p)}r||g||u?(T("[PrepTarget] Prepped Target",i.body),d.addEventListener("paste",p=>{pe&&document.activeElement&&document.activeElement.nodeName!=="INPUT"&&(p.stopImmediatePropagation(),T("Stopped Paste Propogation"))},!0),i.body.classList.add("voicein_ready")):(T("[PrepTarget] Paste Trapper Not Enabled"),i.body.classList.add("voicein_ready"))}}function f(n){for(let a=0;a<n.length;a+=1){let i=n[a];i.length>0&&i[0]===" "&&(i=i.slice(1),n[a]=i),i.length>0&&i[i.length-1]===" "&&(n[a]=i.slice(0,i.length-1))}}const k=navigator.platform.toUpperCase().indexOf("MAC")>=0?91:17;async function P(n,a){await chrome.runtime.sendMessage({message_id:"copy_text",value:n})&&a(),await ce(50)}async function L(n,a){try{if(navigator.clipboard&&navigator.clipboard.writeText){try{await navigator.clipboard.writeText(n),a()}catch(i){console.error("Could not clipboard write text: ",i),await P(n,a)}document.activeElement&&document.activeElement.nodeName==="INPUT"&&document.activeElement.dispatchEvent(new KeyboardEvent("keyup",{keyCode:k})),await ce(50)}else await P(n,a)}catch(i){console.error("Could not copy text: ",i),ye(i)}return 0}function N(n){n=n.replace("<","&lt;").replace(">","&gt;"),chrome.runtime.sendMessage({message_id:"forward",payload:{action:"show_notification",message:`Upgrade to <a href="https://dictanote.co/voicein/plus/?utm_source=extension&utm_medium=notification&utm_campaign=command" target="_blank" class="external">Voice In Plus</a> to use the ${n} command.`}})}async function y(n,a){switch(n){case"<copy>":a.execCommand("copy");break;case"<cut>":a.execCommand("cut");break;case"<paste>":a.execCommand("paste");break;case"<delete>":a.execCommand("delete");break;case"<selectall>":a.execCommand("selectAll");break;case"<bold>":a.execCommand("bold");break;case"<italic>":a.execCommand("italic");break;case"<underline>":a.execCommand("underline");break;case"<strikethrough>":a.execCommand("strikeThrough");break;case"<indent>":a.execCommand("indent");break;case"<outdent>":a.execCommand("outdent");break;case"<scrolltop>":U(-1,1e3,0);break;case"<scrollbottom>":U(1,1e3,Math.max(document.body.scrollHeight-window.innerHeight,0));break;case"<scrollup>":U(-1,1e3,Math.max(window.scrollY-Math.max(window.innerHeight-100,0),0));break;case"<scrolldown>":U(1,1e3,window.scrollY+Math.max(window.innerHeight-100,0));break;case"<capson>":$=!0;break;case"<capsoff>":$=!1;break;case"<capitalize>":H=!0;break;case"<stop>":chrome.runtime.sendMessage({message_id:"stop_recognition"});break;case"<enter>":{const i={bubbles:!0,cancelable:!0,key:"Enter",keyCode:13,which:13,composed:!0},d=new KeyboardEvent("keydown",i);x.dispatchEvent(d);const r=new KeyboardEvent("keypress",i);x.dispatchEvent(r);const g=new KeyboardEvent("keyup",i);x.dispatchEvent(g),E="";break}case"<tab>":{const i={bubbles:!0,cancelable:!0,key:"Tab",keyCode:9,which:9,composed:!0},d=new KeyboardEvent("keydown",i);x.dispatchEvent(d);const r=new KeyboardEvent("keyup",i);x.dispatchEvent(r);break}case"<deleteword>":{if(!B){N(n);break}m(x,1);break}case"<deleteline>":{if(!B){N(n);break}m(x,1,!0);break}case"<undo>":{if(!B){N(n);break}if(!a.execCommand("undo")){const r=navigator.platform.toUpperCase().indexOf("MAC")>=0?"metaKey":"ctrlKey",g={keyCode:G.z,type:"keydown",[r]:!0},u={keyCode:G.z,type:"keyup",[r]:!0};me(x,g),me(x,u)}break}default:if(n.startsWith("<lang:")&&n.endsWith(">")){const i=n.substring(6,n.length-1);chrome.runtime.sendMessage({message_id:"update_language",language:i})}else if(n.startsWith("<press:")&&n.endsWith(">")){if(!B){N(n);break}chrome.runtime.sendMessage({message_id:"press_key",key:n.substring(7,n.length-1)}),await ce(100)}else if(n.startsWith("<deleteword:")&&n.endsWith(">")){if(!B){N(n);break}const i=parseInt(n.substring(12,n.length-1),10);m(x,i)}else if(n.startsWith("<backspace:")&&n.endsWith(">")){if(!B){N(n);break}let i=parseInt(n.substring(11,n.length-1),10);for(;i>0;)a.execCommand("delete"),i-=1}else if(n.startsWith("<case:")&&n.endsWith(">")){const i=n.substring(6,n.length-1).toLocaleLowerCase(),d=["lower","upper","capitalize","default","sentence"],r=["lc","uc","ce","df","sc"];if(d.indexOf(i)!==-1)return D=r[d.indexOf(i)],chrome.runtime.sendMessage({message_id:"update_change_case",changeCase:D}),0}else if(n.startsWith("<click:")&&n.endsWith(">")){const i=n.substring(7,n.length-1).toLocaleLowerCase();ze(i)}else return T("Unknown command ",n),-1}return 0}async function A(n,a){T(`pasteTextIntoTarget "${a}"`),h(),a=a.replaceAll("<newline>",`
`),a=a.replaceAll("<newparagraph>",`

`);const i=a.split(ie),d=Z(),r=()=>{d.execCommand("paste",!1)};i.length>1&&f(i);for(let g=0;g<i.length;g+=1){let u=i[g];if(u)switch(u){case"<newparagraph>":{await L(`

`,r),E="";break}case"<insertspace>":{await L(I,r),E+=I;break}case"<newline>":{await L(`
`,r),E="";break}default:{if(u.startsWith("<")&&u.endsWith(">")&&await y(u,d)===0)break;H&&(u=t(u),H=!1),$&&(u=u.toLocaleUpperCase());const l=w(u,E);await L(l,r),E+=l}}}}async function W(n,a){T(`insertTextIntoTextArea "${a}"`);function i(g,u){const l=g.selectionStart,p=g.selectionEnd,v=g.value;g.value=v.substring(0,l)+u+v.substring(p);const b=l+u.length;g.setSelectionRange(b,b)}const d=a.split(ie);d.length>1&&f(d);const r=Z();for(let g=0;g<d.length;g+=1){let u=d[g];if(u)switch(u){case"<newparagraph>":{i(n,`

`),E="";break}case"<insertspace>":{i(n,I),E+=I;break}case"<newline>":{i(n,`
`),E="";break}default:{if(u.startsWith("<")&&u.endsWith(">")&&await y(u,r)===0)break;n.blur(),n.focus(),H&&(u=t(u),H=!1),$&&(u=u.toLocaleUpperCase());const l=w(u,E);i(n,l),E+=l,document.activeElement.dispatchEvent(new KeyboardEvent("keyup",{keyCode:k})),n.blur(),n.focus()}}}}async function Ke(n,a){T(`insertTextIntoContentEditable "${a}"`);let i,d,r;const g=Z(),u=Pe();if(u&&u.getSelection&&(i=u.getSelection(),i.getRangeAt&&i.rangeCount)){d=i.getRangeAt(0),d.collapsed||d.deleteContents();let l=!1;const p=a.split(ie);p.length>1&&f(p);for(let v=0;v<p.length;v+=1){let b=p[v];if(b)switch(b){case"<newline>":{r=document.createElement("span"),r.innerHTML="<br>",d.insertNode(r),d.collapse(!0),d.setStartAfter(r),d.setEndAfter(r),E="";break}case"<newparagraph>":{r=document.createElement("br"),d.insertNode(r),d.collapse(!0),d.setStartAfter(r),d.setEndAfter(r),r=document.createElement("br"),d.insertNode(r),d.collapse(!0),d.setStartAfter(r),d.setEndAfter(r),E="";break}case"<paste>":{g.execCommand("paste"),l=!0;break}case"<insertspace>":{b=I,r=document.createTextNode(b),d.insertNode(r),d.collapse(!0),d.setStart(r,b.length),d.setEnd(r,b.length),E+=b;break}default:{if(b.startsWith("<")&&b.endsWith(">")&&await y(b,g)===0){l=!0;break}H&&(b=t(b),H=!1),$&&(b=b.toLocaleUpperCase());const S=w(b,E);r=document.createTextNode(S),d.insertNode(r),d.collapse(!0),d.setStart(r,S.length),d.setEnd(r,S.length),E+=S;break}}}l||(i.removeAllRanges(),i.addRange(d)),r&&r.parentNode&&r.parentNode.normalize()}}function We(n){const a=[{actionGroups:[],urlRegexes:["facebook\\.com","messenger\\.com"]},{actionGroups:[],selectors:['[contenteditable]:not([contenteditable="false"])'],urlRegexes:["docs\\.google\\.com/spreadsheets"]},{name:"htmlFill",actions:[{actionType:"dispatchEvent",event:{event:"ClipboardEvent",eventDataFormat:{clipboardData:[{type:"text/plain"},{type:"text/html"}]},eventInit:{bubbles:!0,cancelable:!0,composed:!0},eventType:"paste"}},{actionType:"dispatchEvent",event:{event:"InputEvent",eventDataFormat:{dataTransfer:[{type:"text/plain"},{type:"text/html"}]},eventInit:{bubbles:!0,cancelable:!0,composed:!0,detail:0,inputType:"insertFromPaste"},eventType:"beforeinput"}},{actionType:"execCommand",command:"insertHTML",fillFormat:{type:"text/html"}}],selectors:['[contenteditable]:not([contenteditable="false"])']},{name:"htmlFillInput",actions:[{actionType:"dispatchEvent",event:{event:"InputEvent",eventDataFormat:{dataTransfer:[{type:"text/plain"},{type:"text/html"}]},eventInit:{bubbles:!0,cancelable:!0,composed:!0,detail:0,inputType:"insertFromPaste"},eventType:"beforeinput"}},{actionType:"execCommand",command:"insertText",fillFormat:{type:"text/plain"}}],selectors:["input","textarea"]},{name:"unused",actions:[{actionType:"dispatchEvent",event:{event:"InputEvent",eventDataFormat:{dataTransfer:[{type:"text/plain"},{type:"text/html"}]},eventInit:{bubbles:!0,cancelable:!0,composed:!0,detail:0,inputType:"insertFromPaste"},eventType:"beforeinput"}},{actionType:"fillElementValue",fillFormat:{type:"text/plain"}},{actionType:"dispatchEvent",event:{event:"InputEvent",eventDataFormat:{dataTransfer:[{type:"text/plain"},{type:"text/html"}]},eventInit:{bubbles:!0,cancelable:!0,composed:!0,detail:0,inputType:"insertFromPaste"},eventType:"input"}},{actionType:"dispatchEvent",event:{event:"InputEvent",eventInit:{bubbles:!0,cancelable:!1,composed:!1},eventType:"change"}}],selectors:["input","textarea"]},{name:"txtFill",actions:[{actionType:"dispatchEvent",event:{event:"ClipboardEvent",eventDataFormat:{clipboardData:[{type:"text/plain"}]},eventInit:{bubbles:!0,cancelable:!0,composed:!0},eventType:"paste"}},{actionType:"dispatchEvent",event:{event:"InputEvent",eventDataFormat:{dataTransfer:[{type:"text/plain"}]},eventInit:{bubbles:!0,cancelable:!0,composed:!0,detail:0,inputType:"insertFromPaste"},eventType:"beforeinput"}},{actionType:"execCommand",command:"insertText",fillFormat:{type:"text/plain"}}],selectors:['[contenteditable]:not([contenteditable="false"])']},{name:"txtFill2",actions:[{actionType:"dispatchEvent",event:{event:"InputEvent",eventDataFormat:{dataTransfer:[{type:"text/plain"}]},eventInit:{bubbles:!0,cancelable:!0,composed:!0,detail:0,inputType:"insertFromPaste"},eventType:"beforeinput"}},{actionType:"execCommand",command:"insertText",fillFormat:{type:"text/plain"}}],selectors:['[contenteditable]:not([contenteditable="false"])']}],i=j();return i==="app.hubspot.com"||i.endsWith("twitter.com")||V("EnableTxtFill")==="true"||i==="www.reddit.com"||i==="dictanote.co"||i==="answers.microsoft.com"||i==="www.facebook.com"?a[5]:V("EnableHTMLFill")==="true"?a[2]:i==="mail.google.com"?a[6]:n.tagName==="INPUT"||n.tagName==="TEXTAREA"?a[3]:a[2]}function oe(n,a,i,d){let r=a;return d&&d.localName==="input"?r=n.replace(/(\S)\n+(\S)/g,"$1 $2"):(d&&d.localName==="textarea"||i&&i.type==="text/plain")&&(r=n),r}function Ge(n,a){if(n.event.eventType==="paste"&&!a.plainText&&!a.richText)return!0;const i=n.event,{eventInit:d,eventDataFormat:r}=i;if(r){if(r.dataTransfer){const u=new DataTransfer;r.dataTransfer.forEach(l=>{const p=oe(a.plainText,a.richText,l,a.element);u.setData(l.type,p)}),d.dataTransfer=u}if(r.clipboardData){const u=new DataTransfer;r.clipboardData.forEach(l=>{const p=oe(a.plainText,a.richText,l,a.element);u.setData(l.type,p)}),d.clipboardData=u}}const g=new window[i.event](i.eventType,d);return a.element.dispatchEvent(g)}function $e(n,a){let i=n.customFillValue;i||(i=n.fillFormat?oe(a.plainText,a.richText,n.fillFormat,a.element):void 0),a.element.ownerDocument.execCommand(n.command,!1,i)}function Ve(n,a){n.element.setSelectionRange(a,a)}function Ye(n,a){if(!(a.element instanceof HTMLInputElement||a.element instanceof HTMLTextAreaElement))throw new Error("fillElementValue received element not of type input or textarea");const i=a.element,d=a.replaceTextSuffix,r=oe(a.plainText,a.richText,n.fillFormat,a.element)+d,g=i.selectionStart,u=i.selectionEnd;i.value=i.value.substring(0,g)+r+i.value.substring(u,i.value.length),Ve(a,g+r.length)}async function Ee(n,a){T(`insertAdvanced "${a}"`),h();const i=We(n),d=Z();function r(l){return l=Mt(l),l.length>0&&l[0]===" "&&(l=`&nbsp;${l.substring(1)}`),l=l.replaceAll("  "," &nbsp;"),l=l.replaceAll(`
`,"<br>"),`${l}`}function g(l,p){let v=p;v.endsWith(`
`)&&(v+=`
`),T(`strategy=${i.name} text="${p}" html="${r(v)}"`);const b={element:l,plainText:p,richText:r(v),replaceTextSuffix:""};let S=!0;for(let M=0;M<i.actions.length;M+=1){const C=i.actions[M];if(S||C.forceExecution)switch(C.actionType){case"dispatchEvent":S=Ge(C,b),S&&T(`dispatch failed ${b.element}`);break;case"execCommand":$e(C,b);break;case"fillElementValue":Ye(C,b);break;default:T(`Unknown action type: ${C.actionType}`)}}}a=a.replaceAll("<newparagraph>",`

`),a=a.replaceAll("<newline>",`
`),a=a.replaceAll("<insertspace>",I);const u=a.split(ie);u.length>1&&f(u);for(let l=0;l<u.length;l+=1){let p=u[l];if(p)switch(p){default:{if(p.startsWith("<")&&p.endsWith(">")&&await y(p,d)===0)break;H&&(p=t(p),H=!1),$&&(p=p.toLocaleUpperCase());const v=w(p,E);g(n,v),E+=v}}}}if(e.length>0){let n=function(r){const g=new Date;return r.replace(/yyyy/g,g.getFullYear()).replace(/yy/g,g.getFullYear().toString().slice(-2)).replace(/MM/g,(g.getMonth()+1).toString().padStart(2,"0")).replace(/M/g,g.getMonth()+1).replace(/dd/g,g.getDate().toString().padStart(2,"0")).replace(/d/g,g.getDate()).replace(/HH/g,g.getHours().toString().padStart(2,"0")).replace(/H/g,g.getHours()).replace(/hh/g,(g.getHours()%12||12).toString().padStart(2,"0")).replace(/h/g,g.getHours()%12||12).replace(/mm/g,g.getMinutes().toString().padStart(2,"0")).replace(/m/g,g.getMinutes()).replace(/ss/g,g.getSeconds().toString().padStart(2,"0")).replace(/s/g,g.getSeconds()).replace(/a/g,g.getHours()>=12?"pm":"am").replace(/A/g,g.getHours()>=12?"PM":"AM")};e=e.trimLeft();const a=j(),i=Rt();Ht(a,i)?E=E.slice(-6):E=c(x,6),e=e.replace(/<date(?::([^>]+))?>/g,(r,g)=>g?n(g):new Date().toLocaleDateString()),pe=!0;try{if(x.tagName==="INPUT"||x.tagName==="TEXTAREA")Y?V("VoiceInAdvanced2")==="true"?A(x,e):Ee(x,e):W(x,e);else{const r=j();if(Y&&It.indexOf(r)===-1){const g=["www.canva.com"];V("VoiceInAdvanced2")==="true"||g.indexOf(r)!==-1?A(x,e):Ee(x,e)}else Ke(x,e)}}catch(r){console.error(r),ye(r)}return pe=!1,e.length}return 0}function Ft(e,t){if(le="",!B&&se)return;const o=Ot();(o.targetable||t&&o.target&&o.target.tagName!=="IFRAME")&&(x=o.target,Ut(e))}async function Kt(){const e=await chrome.storage.local.get("changeCase");e.changeCase&&(D=e.changeCase)}function Wt(){try{return window.self!==window.top}catch{return!0}}async function X(){await Gt(),Wt()&&document.addEventListener("keydown",e=>{e.keyCode===13&&le&&(e.stopImmediatePropagation(),e.preventDefault(),chrome.runtime.sendMessage({message_id:"restart_recognition"}),le="")},!0)}async function Gt(){const e=j();if(_e(e)&&(Y=!0),!(await chrome.storage.local.get("pro")).pro){const c=Dt();se=!1,se=qe.some(s=>c.endsWith(s)),(c.startsWith("app.")||c.indexOf("crm")!==-1||c.indexOf("health")!==-1)&&(se=!0);return}if(B=!0,Y=!0,[].indexOf(e)!==-1)T("paste mode disabled - exception"),Y=!1;else{const c=await chrome.storage.local.get("no_advancedmode_domains");if(c.no_advancedmode_domains){const s=j(),m=c.no_advancedmode_domains;let w=!1;for(let h=0;h<m.length;h+=1)if(s.endsWith(m[h])){w=!0;break}w&&(Y=!1)}}Kt(),T("Loaded settings")}Pt();const $t="/images/icon144.png",Vt="/images/microphone-permission.png";export{$t as _,Vt as a,ke as g};
